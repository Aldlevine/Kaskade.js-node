!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.kaskade=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports=function(){require("../constants");require("../augments-ecma")(),require("../augments-html")();var e=new Function,t=new e;e.prototype.constructor=e;var o=require("./connection");return e.prototype.connection=o,e.prototype.method=o.method,e.prototype.execute=o.execute,e.prototype.data=require("./data-client"),t}();
},{"../augments-ecma":2,"../augments-html":3,"../constants":7,"./connection":4,"./data-client":5}],2:[function(require,module,exports){
module.exports=function(){Object.isEqual=function(e,t){if(Object.keys(e).length==Object.keys(t).length)for(var r in e)return e[r]!==t[r]?!1:!0;return!1},Array.prototype.remove=function(e){var t=this.indexOf(e);return t>=0&&this.splice(t,1),t},Array.prototype.add=function(e){this.indexOf(e)<0&&this.push(e)},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.clone=function(){return this.slice(0)},Object.defineProperties(Array.prototype,{remove:{enumerable:!1},add:{enumerable:!1},last:{enumerable:!1},clone:{enumerable:!1}}),String.prototype.camelCase=function(){for(var e=this.split("-"),t=1,r=e.length;r>t;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}};
},{}],3:[function(require,module,exports){
module.exports=function(){HTMLElement.prototype.addEventHandler=function(t,e){t instanceof Array||(t=[t]);for(var n=0,i=t.length;i>n;n++)this.addEventListener?this.addEventListener(t[n],e,!1):(this.attachEvent("on"+t[n],e),this.attachEvent(t[n],e))},HTMLElement.prototype.getDataset=function(){function t(){}if(this.dataset)return this.dataset;var e=new t;return[].filter.call(this.attributes,function(t){if(/^data-/.test(t.nodeName)){var n=t.name||t.nodeName,i=t.value||t.nodeValue;n=n.replace(/^data-/,"").camelCase(),e[n]=i}}),e},function(){function t(t){this.el=t;for(var e=t.className.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<e.length;n++)i.call(this,e[n])}function e(t,e,n){Object.defineProperty?Object.defineProperty(t,e,{get:n}):t.__defineGetter__(e,n)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var n=Array.prototype,i=n.push,s=n.splice,a=n.join;t.prototype={add:function(t){this.contains(t)||(i.call(this,t),this.el.className=this.toString())},contains:function(t){return-1!=this.el.className.indexOf(t)},item:function(t){return this[t]||null},remove:function(t){if(this.contains(t)){for(var e=0;e<this.length&&this[e]!=t;e++);s.call(this,e,1),this.el.className=this.toString()}},toString:function(){return a.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},window.DOMTokenList=t,e(Element.prototype,"classList",function(){return new t(this)})}}()};
},{}],4:[function(require,module,exports){
var SockJS=require("./sockjs-client"),uuid=require("node-uuid"),RSA=require("node-rsa"),self=module.exports;self.connect=function(e){var s=this;e=e||"/kaskade",s.open=!1,s.sockjs=new SockJS(e),s.sockjs.onopen=function(){s.open=!0,s.send.processQueue()},s.sockjs.onmessage=function(e){s.parseMessage(e.data)},s.sockjs.onclose=function(){s.open=!1}},self.send=function e(s){self.open?self.sockjs.send(s):(e.queue=e.queue||[],e.queue.push(s))},self.send.processQueue=function(){if(self.queue)for(;self.queue.length;)self(self.queue.shift())},self.method=function s(e,n){s.stack=s.stack||{},s.stack[e]=n},self.execute=function n(e,s,t){var u=uuid.v1(),c={type:"execute",data:{id:u,name:e,params:s}},a=JSON.stringify(c);n.return_stack=self.return_stack||{},n.return_stack[u]=t,self.send(a)},self.parseMessage=function(e){var s=JSON.parse(e),n=s.type,t=s.data;if("response"==n){var u=t.id,c=t.params;self.execute.return_stack[u]instanceof Function&&(self.execute.return_stack[u](c),delete self.execute.return_stack[u])}else if("execute"==n){var a=t.name,c=t.params;self.method.stack[a]instanceof Function&&self.method.stack[a](c)}};
},{"./sockjs-client":6,"node-rsa":38,"node-uuid":42}],5:[function(require,module,exports){
var self=module.exports,DEF=require("../constants"),connection=require("./connection");self.Collection=function(){var e=function(n){var o=this,n=n||{};o.name=n.name,o.keyField=n.keyField,o.observers={},o.observerCallbacks={},o.records={},e.collections[o.name]=o};return e.collections={},e.prototype.select=function(e,n){var o=this,t={name:o.name,query:e};connection.execute(DEF.SRV_COL_SELECT,t,function(e){var t={},r=o.keyField;e.reduce(function(e,n){var o=n[r];return e[o]=n,e},t),n(t)})},e.prototype.observe=function(e,n){var o=this,t={name:o.name,query:e};connection.execute(DEF.SRV_COL_OBSERVE,t,function(e){var r=e.observerId;o.observerCallbacks[r]=n,connection.execute(DEF.SRV_COL_SELECT,t,function(e){var n={},t=o.keyField;e.reduce(function(e,n){var r=n[t];return o.records[r]=n,e[r]=n,e},n),o.observers[r]=n,o.observerCallbacks[r]("init",n)})})},e.prototype.insert=function(e){var n=this,o={name:n.name,method:"insert",record:e};connection.execute(DEF.SRV_COL_MUTATE,o)},e.prototype.update=function(e,n){var o=this,t={name:o.name,method:"update",query:e,update:n};connection.execute(DEF.SRV_COL_MUTATE,t)},e.prototype.remove=function(e){var n=this,o={name:n.name,method:"remove",query:e};connection.execute(DEF.SRV_COL_MUTATE,o)},e.prototype.__handleMutation=function(e,n,o){var t=this,r=t.records,c=t.observers[n],a=t.observerCallbacks[n],i=t.keyField;switch(a=a instanceof Function?a:new Function,e){case"insert":var s=o[i];r[s]=o,c[s]=o,a("insert",o);break;case"update":var s=o[i];r[s]=o,c[s]=o,a("update",o);break;case"remove":var s=o[i];delete r[s],delete c[s],a("remove",o)}},e}(),connection.method(DEF.CON_COL_MUTATE,function(e){var n=self.Collection.collections[e.name],o=e.method,t=e.observerId,r=e.record;n.__handleMutation(o,t,r)});
},{"../constants":7,"./connection":4}],6:[function(require,module,exports){
var JSON;JSON||(JSON={}),function(){function str(e,t){var n,r,o,i,a,u=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,n=0;i>n;n+=1)a[n]=str(n,s)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,s),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o=str(r,s),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,o}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return 10>e?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),module.exports=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],o=n.arrIndexOf(r,t);return-1!==o?void(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].apply(this,n)};var o=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var i=function(e){var t=this;t._events=e||[],t._listeners={}};i.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;r<t._listeners[e].length;r++)t._listeners[e][r].apply(t,n)}},i.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},i.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)},i.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||a.length;var n,r=[];for(n=0;e>n;n++)r.push(a.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,r=Array(t+1).join("0");return(r+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var u="_jp";n.polluteGlobalNamespace=function(){u in t||(t[u]={})},n.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var r=e.location;if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");return 0===t.indexOf("//")&&(t=r.protocol+t),0===t.indexOf("/")&&(t=r.protocol+"//"+r.host+t),t=t.replace(/[/]+$/,"")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);if(-1===r)return e.slice();var o=e.slice(0,r);return o.concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var s,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},l=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(e){return c.lastIndex=0,c.test(e)&&(e=e.replace(c,function(e){return f[e]})),'"'+e+'"'},p=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=d(e);return l.lastIndex=0,l.test(t)?(s||(s=p(l)),t.replace(l,function(e){return s[e]})):t};var h=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<h.length;t++){var n=h[t];e[n]=S[n]&&S[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},o=[];t||(t=h);for(var i=0;i<t.length;i++){var a=t[i];r[a]=e[a]}var u=function(e){var t=e.shift();r[t]?o.push(t):e.length>0&&u(e)};return n.websocket!==!1&&u(["websocket"]),r["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?u(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?u(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var _="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(_ in t)){var r={};t[_]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[_](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var v={},y=!1,g=function(){for(var e in v)v[e](),delete v[e]},m=function(){y||(y=!0,g())};n.attachEvent("unload",m),n.unload_add=function(e){var t=n.random_string(8);return v[t]=e,y&&n.delay(g),t},n.unload_del=function(e){e in v&&delete v[e]},n.createIframe=function(t,r){var o,i,a=e.createElement("iframe"),u=function(){clearTimeout(o);try{a.onload=null}catch(e){}a.onerror=null},s=function(){a&&(u(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(i))},c=function(e){a&&(s(),r(e))},f=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){c("onerror")},a.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},e.body.appendChild(a),o=setTimeout(function(){c("timeout")},15e3),i=n.unload_add(s),{post:f,cleanup:s,loaded:u}},n.createHtmlfile=function(e,r){var o,i,a,s=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},f=function(){s&&(c(),n.unload_del(i),a.parentNode.removeChild(a),a=s=null,CollectGarbage())},l=function(e){s&&(f(),r(e))},d=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(n){}};s.open(),s.write('<html><script>document.domain="'+document.domain+'";</script></html>'),s.close(),s.parentWindow[u]=t[u];var p=s.createElement("div");return s.body.appendChild(p),a=s.createElement("iframe"),p.appendChild(a),a.src=e,o=setTimeout(function(){l("timeout")},15e3),i=n.unload_add(f),{post:d,cleanup:f,loaded:c}};var b=function(){};b.prototype=new i(["chunk","finish"]),b.prototype._start=function(e,r,o,i){var a=this;try{a.xhr=new XMLHttpRequest}catch(u){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(u){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,r,!0)}catch(s){return a.emit("finish",0,""),void a._cleanup()}if(i&&i.no_credentials||(a.xhr.withCredentials="true"),i&&i.headers)for(var c in i.headers)a.xhr.setRequestHeader(c,i.headers[c]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(o)},b.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(r){}t.unload_ref=t.xhr=null}},b.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var w=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};w.prototype=new b;var O=n.XHRLocalObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r,{no_credentials:!0})})};O.prototype=new b;var x=n.XDRObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r)})};x.prototype=new i(["chunk","finish"]),x.prototype._start=function(e,t,r){var o=this,i=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=i.ontimeout=i.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};i.onprogress=function(){o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},o.xdr=i,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(r)}catch(u){a()}},x.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(r){}t.unload_ref=t.xdr=null}},x.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:L.enabled()?3:4};var S=function(e,r,o){if(this===t)return new S(e,r,o);var i,a=this;a._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(a._options,o),a._base_url=n.amendUrl(e),a._server=a._options.server||n.random_number_string(1e3),a._options.protocols_whitelist&&a._options.protocols_whitelist.length?i=a._options.protocols_whitelist:(i="string"==typeof r&&r.length>0?[r]:n.isArray(r)?r:null,i&&a._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),a._protocols=[],a.protocol=null,a.readyState=S.CONNECTING,a._ir=F(a._base_url),a._ir.onfinish=function(e,t){a._ir=null,e?(a._options.info&&(e=n.objectExtend(e,a._options.info)),a._options.rtt&&(t=a._options.rtt),a._applyInfo(e,t,i),a._didClose()):a._didClose(1002,"Can't connect to server",!0)}};S.prototype=new r,S.version="0.3.4",S.CONNECTING=0,S.OPEN=1,S.CLOSING=2,S.CLOSED=3,S.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},S.prototype._dispatchOpen=function(){var e=this;e.readyState===S.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=S.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},S.prototype._dispatchMessage=function(e){var t=this;t.readyState===S.OPEN&&t.dispatchEvent(new o("message",{data:e}))},S.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===S.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},S.prototype._didClose=function(e,t,r){var i=this;if(i.readyState!==S.CONNECTING&&i.readyState!==S.OPEN&&i.readyState!==S.CLOSING)throw new Error("INVALID_STATE_ERR");i._ir&&(i._ir.nuke(),i._ir=null),i._transport&&(i._transport.doCleanup(),i._transport=null);var a=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&i.readyState===S.CONNECTING&&!r){if(i._try_next_protocol(a))return;a=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}i.readyState=S.CLOSED,n.delay(function(){i.dispatchEvent(a)})},S.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var r=JSON.parse(e.slice(1)||"[]"),o=0;o<r.length;o++)t._dispatchMessage(r[o]);break;case"m":var r=JSON.parse(e.slice(1)||"null");t._dispatchMessage(r);break;case"c":var r=JSON.parse(e.slice(1)||"[]");t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},S.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var o=r.protocol=r._protocols.shift();if(!o)return!1;if(S[o]&&S[o].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return r._protocols.unshift(o),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(S[o]&&S[o].enabled(r._options)){var i=S[o].roundTrips||1,a=(r._options.rto||0)*i||5e3;r._transport_tref=n.delay(a,function(){r.readyState===S.CONNECTING&&r._didClose(2007,"Transport timeouted")});var u=n.random_string(8),s=r._base_url+"/"+r._server+"/"+u;return r._debug("Opening transport:",o," url:"+s," RTO:"+r._options.rto),r._transport=new S[o](r,s,r._base_url),!0}r._debug("Skipping transport:",o)}},S.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return r.readyState!==S.CONNECTING&&r.readyState!==S.OPEN?!1:(r.readyState=S.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},S.prototype.send=function(e){var t=this;if(t.readyState===S.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===S.OPEN&&t._transport.doSend(n.quote(""+e)),!0},S.prototype._applyInfo=function(t,r,o){var i=this;i._options.info=t,i._options.rtt=r,i._options.rto=n.countRTO(r),i._options.info.null_origin=!e.domain;var a=n.probeProtocols();i._protocols=n.detectProtocols(a,o,t)};var C=S.websocket=function(e,r){var o=this,i=r+"/websocket";i="https"===i.slice(0,5)?"wss"+i.slice(5):"ws"+i.slice(4),o.ri=e,o.url=i;var a=t.WebSocket||t.MozWebSocket;o.ws=new a(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};C.prototype.doSend=function(e){this.ws.send("["+e+"]")},C.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},C.enabled=function(){return!!t.WebSocket||!!t.MozWebSocket},C.roundTrips=2;var N=function(){};N.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},N.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},N.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},N.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},N.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var E=function(t,r,o){var i=this;if(!("_send_form"in i)){var a=i._send_form=e.createElement("form"),u=i._send_area=e.createElement("textarea");u.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(u),e.body.appendChild(a)}var a=i._send_form,u=i._send_area,s="a"+n.random_string(8);a.target=s,a.action=t+"/jsonp_send?i="+s;var c;try{c=e.createElement('<iframe name="'+s+'">')}catch(f){c=e.createElement("iframe"),c.name=s}c.id=s,a.appendChild(c),c.style.display="none";try{u.value=r}catch(l){n.log("Your browser is seriously broken. Go home! "+l.message)}a.submit();var d=function(){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),u.value="",o(!0))};return c.onerror=c.onload=d,c.onreadystatechange=function(){"complete"==c.readyState&&d()},d},j=function(e){return function(t,n,r){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}},T=function(t,r){var o,i,a=e.createElement("script"),u=function(e){i&&(i.parentNode.removeChild(i),i=null),a&&(clearTimeout(o),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,r(e),r=null)},s=!1,c=null;if(a.id="a"+n.random_string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(){c||(c=setTimeout(function(){s||u(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(){u(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){s=!0;try{a.onclick()}catch(e){}}a&&u(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof a.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))i=e.createElement("script"),i.text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=i.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(f){}a.async=!0}"undefined"!=typeof a.async&&(a.async=!0),o=setTimeout(function(){u(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=e.getElementsByTagName("head")[0];return l.insertBefore(a,l.firstChild),i&&l.insertBefore(i,l.firstChild),u},k=S["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(E),r._schedule_recv()};k.prototype=new N,k.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=M(e.trans_url+"/jsonp",T,t)},k.enabled=function(){return!0},k.need_body=!0,k.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var M=function(e,r,o){var i="a"+n.random_string(6),a=e+"?c="+escape(u+"."+i),s=0,c=function(e){switch(s){case 0:delete t[u][i],o(e);break;case 1:o(e),s=2;break;case 2:delete t[u][i]}},f=r(a,c);t[u][i]=f;var l=function(){t[u][i]&&(s=1,t[u][i](n.closeFrame(1e3,"JSONP user aborted read")))};return l},J=function(){};J.prototype=new N,J.prototype.run=function(e,t,n,r,o){var i=this;i.ri=e,i.trans_url=t,i.send_constructor(j(o)),i.poll=new Z(e,r,t+n,o)},J.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var R=S["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XHRCorsObject)};R.prototype=new J,R.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},R.roundTrips=2,R.need_body=!0;var I=S["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",rt,n.XDRObject)};I.prototype=new J,I.enabled=function(){return!!t.XDomainRequest},I.roundTrips=2;var X=S["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRCorsObject)};X.prototype=new J,X.enabled=R.enabled,X.roundTrips=2;var A=S["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XDRObject)};A.prototype=new J,A.enabled=I.enabled,A.roundTrips=2;var L=function(){};L.prototype.i_constructor=function(e,t,r){var o=this;o.ri=e,o.origin=n.getOrigin(r),o.base_url=r,o.trans_url=t;var i=r+"/iframe.html";o.ri._options.devel&&(i+="?t="+ +new Date),o.window_id=n.random_string(8),i+="#"+o.window_id,o.iframeObj=n.createIframe(i,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},L.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},L.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([S.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},L.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},L.prototype.doSend=function(e){this.postMessage("m",e)},L.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var P,H=function(e,r){parent!==t?parent.postMessage(P+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},D=function(){};D.prototype._didClose=function(e,t){H("t",n.closeFrame(e,t))},D.prototype._didMessage=function(e){H("t",e)},D.prototype._doSend=function(e){this._transport.doSend(e)},D.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,S.bootstrap_iframe=function(){var r;P=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),i=e.data.slice(8,9),a=e.data.slice(9);if(o===P)switch(i){case"s":var u=JSON.parse(a),s=u[0],c=u[1],f=u[2],l=u[3];if(s!==S.version&&n.log('Incompatibile SockJS! Main site uses: "'+s+'", the iframe: "'+S.version+'".'),!n.flatUrl(f)||!n.flatUrl(l))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(f)||!n.isSameOriginUrl(l))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,f,l])+")");r=new D,r._transport=new D[c](r,f,l);break;case"m":r._doSend(a);break;case"c":r&&r._doCleanup(),r=null}}};n.attachMessage(o),H("s")};var U=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};U.prototype=new i(["finish"]),U.prototype.doXhr=function(e,t){var r=this,o=(new Date).getTime(),i=new t("GET",e+"/info"),a=n.delay(8e3,function(){i.ontimeout()});i.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var n=(new Date).getTime()-o,i=JSON.parse(t);"object"!=typeof i&&(i={}),r.emit("finish",i,n)}else r.emit("finish")},i.ontimeout=function(){i.close(),r.emit("finish")}};var q=function(t){var r=this,o=function(){var e=new L;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=JSON.parse(t.substr(1)),o=n[0],i=n[1];r.emit("finish",o,i)}else r.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};q.prototype=new i(["finish"]);var G=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};G.prototype=new i(["finish"]);var F=function(e){if(n.isSameOriginUrl(e))return new U(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new U(e,n.XHRLocalObject);case 2:return new U(e,n.XDRObject);case 3:return new q(e);default:return new G}},W=D["w-iframe-info-receiver"]=function(e,t,r){var o=new U(r,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}};W.prototype.doCleanup=function(){};var B=S["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};B.prototype=new L,B.enabled=function(){return"EventSource"in t&&L.enabled()},B.need_body=!0,B.roundTrips=3;var z=D["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",Q,n.XHRLocalObject)};z.prototype=new J;var V=S["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};V.prototype=new L,V.enabled=function(){return t.XMLHttpRequest&&L.enabled()},V.need_body=!0,V.roundTrips=3;var $=D["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",rt,n.XHRLocalObject)};$.prototype=new J;var Y=S["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};Y.prototype=new L,Y.enabled=function(){return L.enabled()},Y.need_body=!0,Y.roundTrips=3;var K=D["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",nt,n.XHRLocalObject)};K.prototype=new J;var Z=function(e,t,n,r){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=r,o._scheduleRecv()};Z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Z.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var Q=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,i){var a=i?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:a}))})}};Q.prototype=new r,Q.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var et,tt=function(){if(void 0===et)if("ActiveXObject"in t)try{et=!!new ActiveXObject("htmlfile")}catch(e){}else et=!1;return et},nt=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(u+"."+r.id);var i,a=tt()?n.createHtmlfile:n.createIframe;t[u][r.id]={start:function(){i.loaded()},message:function(e){r.dispatchEvent(new o("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){i.cleanup(),r.iframe_close=i=null,delete t[u][r.id],r.dispatchEvent(new o("close",{reason:n}))},i=a(e,function(){r.iframe_close({},"permanent")})};nt.prototype=new r,nt.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var rt=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var i=t.slice(r),a=i.indexOf("\n");if(-1===a)break;r+=a+1;var u=i.slice(0,a);n.dispatchEvent(new o("message",{data:u}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:r}))}};return rt.prototype=new r,rt.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},S.getUtils=function(){return n},S.getIframeTransport=function(){return L},S}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS
});
},{}],7:[function(require,module,exports){
module.exports={SRV_COL_SELECT:"__server_collection_select__",SRV_COL_OBSERVE:"__server_collection_observe__",SRV_COL_MUTATE:"__server_collection_mutate__",CON_COL_MUTATE:"__conn_collection_mutate__"};
},{}],8:[function(require,module,exports){
function replacer(t,e){return util.isUndefined(e)?""+e:!util.isNumber(e)||!isNaN(e)&&isFinite(e)?util.isFunction(e)||util.isRegExp(e)?e.toString():e:e.toString()}function truncate(t,e){return util.isString(t)?t.length<e?t:t.slice(0,e):t}function getMessage(t){return truncate(JSON.stringify(t.actual,replacer),128)+" "+t.operator+" "+truncate(JSON.stringify(t.expected,replacer),128)}function fail(t,e,r,i,s){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:s})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e){if(t===e)return!0;if(util.isBuffer(t)&&util.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return util.isDate(t)&&util.isDate(e)?t.getTime()===e.getTime():util.isRegExp(t)&&util.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:util.isObject(t)||util.isObject(e)?objEquiv(t,e):t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e){if(util.isNullOrUndefined(t)||util.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(isArguments(t))return isArguments(e)?(t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e)):!1;try{var r,i,s=objectKeys(t),n=objectKeys(e)}catch(a){return!1}if(s.length!=n.length)return!1;for(s.sort(),n.sort(),i=s.length-1;i>=0;i--)if(s[i]!=n[i])return!1;for(i=s.length-1;i>=0;i--)if(r=s[i],!_deepEqual(t[r],e[r]))return!1;return!0}function expectedException(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function _throws(t,e,r,i){var s;util.isString(r)&&(i=r,r=null);try{e()}catch(n){s=n}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!s&&fail(s,r,"Missing expected exception"+i),!t&&expectedException(s,r)&&fail(s,r,"Got unwanted exception"+i),t&&s&&r&&!expectedException(s,r)||!t&&s)throw s}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,s=e.name,n=i.indexOf("\n"+s);if(n>=0){var a=i.indexOf("\n",n+1);i=i.substring(a+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert.throws=function(){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(t){if(t)throw t};var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};
},{"util/":10}],9:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],10:[function(require,module,exports){
(function(e,t){function r(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&exports._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=n),s(r,e,r.depth)}function n(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function o(e){return e}function i(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function s(e,t,r){if(e.customInspect&&t&&w(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return x(n)||(n=s(e,n,r)),n}var o=u(e,t);if(o)return o;var g=Object.keys(t),y=i(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),j(t)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return c(t);if(0===g.length){if(w(t)){var d=t.name?": "+t.name:"";return e.stylize("[Function"+d+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(j(t))return c(t)}var m="",h=!1,b=["{","}"];if(f(t)&&(h=!0,b=["[","]"]),w(t)){var O=t.name?": "+t.name:"";m=" [Function"+O+"]"}if(v(t)&&(m=" "+RegExp.prototype.toString.call(t)),S(t)&&(m=" "+Date.prototype.toUTCString.call(t)),j(t)&&(m=" "+c(t)),0===g.length&&(!h||0==t.length))return b[0]+m+b[1];if(0>r)return v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var z;return z=h?l(e,t,r,y,g):g.map(function(n){return p(e,t,r,y,n,h)}),e.seen.pop(),a(z,m,b)}function u(e,t){if(b(t))return e.stylize("undefined","undefined");if(x(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,o){for(var i=[],s=0,u=t.length;u>s;++s)i.push(A(t,String(s))?p(e,t,r,n,String(s),!0):"");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))}),i}function p(e,t,r,n,o,i){var u,c,l;if(l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},l.get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special")),A(n,o)||(u="["+o+"]"),c||(e.seen.indexOf(l.value)<0?(c=y(r)?s(e,l.value,null):s(e,l.value,r-1),c.indexOf("\n")>-1&&(c=i?c.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+c.split("\n").map(function(e){return"   "+e}).join("\n"))):c=e.stylize("[Circular]","special")),b(u)){if(i&&o.match(/^\d+$/))return c;u=JSON.stringify(""+o),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+c}function a(e,t,r){var n=0,o=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function d(e){return null==e}function m(e){return"number"==typeof e}function x(e){return"string"==typeof e}function h(e){return"symbol"==typeof e}function b(e){return void 0===e}function v(e){return O(e)&&"[object RegExp]"===E(e)}function O(e){return"object"==typeof e&&null!==e}function S(e){return O(e)&&"[object Date]"===E(e)}function j(e){return O(e)&&("[object Error]"===E(e)||e instanceof Error)}function w(e){return"function"==typeof e}function z(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function E(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function N(){var e=new Date,t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),H[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var J=/%[sdj%]/g;exports.format=function(e){if(!x(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,i=o.length,s=String(e).replace(J,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),u=o[n];i>n;u=o[++n])s+=y(u)||!O(u)?" "+u:" "+r(u);return s},exports.deprecate=function(r,n){function o(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}if(b(t.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(e.noDeprecation===!0)return r;var i=!1;return o};var R,_={};exports.debuglog=function(t){if(b(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!_[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var r=e.pid;_[t]=function(){var e=exports.format.apply(exports,arguments);console.error("%s %d: %s",t,r,e)}}else _[t]=function(){};return _[t]},exports.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=f,exports.isBoolean=g,exports.isNull=y,exports.isNullOrUndefined=d,exports.isNumber=m,exports.isString=x,exports.isSymbol=h,exports.isUndefined=b,exports.isRegExp=v,exports.isObject=O,exports.isDate=S,exports.isError=j,exports.isFunction=w,exports.isPrimitive=z,exports.isBuffer=require("./support/isBuffer");var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",N(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!O(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./support/isBuffer":9,"_process":28,"inherits":27}],11:[function(require,module,exports){
function Buffer(e,t,r){if(!(this instanceof Buffer))return new Buffer(e,t,r);var n,i=typeof e;if("number"===i)n=e>0?e>>>0:0;else if("string"===i)"base64"===t&&(e=base64clean(e)),n=Buffer.byteLength(e,t);else{if("object"!==i||null===e)throw new Error("First argument needs to be a number, array or string.");"Buffer"===e.type&&isArray(e.data)&&(e=e.data),n=+e.length>0?Math.floor(+e.length):0}var a;TYPED_ARRAY_SUPPORT?a=Buffer._augment(new Uint8Array(n)):(a=this,a.length=n,a._isBuffer=!0);var s;if(TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)a._set(e);else if(isArrayish(e))if(Buffer.isBuffer(e))for(s=0;n>s;s++)a[s]=e.readUInt8(s);else for(s=0;n>s;s++)a[s]=(e[s]%256+256)%256;else if("string"===i)a.write(e,0,t);else if("number"===i&&!TYPED_ARRAY_SUPPORT&&!r)for(s=0;n>s;s++)a[s]=0;return a}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var a=t.length;assert(a%2===0,"Invalid hex string"),n>a/2&&(n=a/2);for(var s=0;n>s;s++){var o=parseInt(t.substr(2*s,2),16);assert(!isNaN(o),"Invalid hex string"),e[r+s]=o}return s}function utf8Write(e,t,r,n){var i=blitBuffer(utf8ToBytes(t),e,r,n);return i}function asciiWrite(e,t,r,n){var i=blitBuffer(asciiToBytes(t),e,r,n);return i}function binaryWrite(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){var i=blitBuffer(base64ToBytes(t),e,r,n);return i}function utf16leWrite(e,t,r,n){var i=blitBuffer(utf16leToBytes(t),e,r,n);return i}function base64Slice(e,t,r){return base64.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function utf8Slice(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var a=t;r>a;a++)e[a]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(e[a]),i=""):i+="%"+e[a].toString(16);return n+decodeUtf8Char(i)}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function binarySlice(e,t,r){return asciiSlice(e,t,r)}function hexSlice(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",a=t;r>a;a++)i+=toHex(e[a]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function readUInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a;return r?(a=e[t],i>t+1&&(a|=e[t+1]<<8)):(a=e[t]<<8,i>t+1&&(a|=e[t+1])),a}}function readUInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a;return r?(i>t+2&&(a=e[t+2]<<16),i>t+1&&(a|=e[t+1]<<8),a|=e[t],i>t+3&&(a+=e[t+3]<<24>>>0)):(i>t+1&&(a=e[t+1]<<16),i>t+2&&(a|=e[t+2]<<8),i>t+3&&(a|=e[t+3]),a+=e[t]<<24>>>0),a}}function readInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a=readUInt16(e,t,r,!0),s=32768&a;return s?-1*(65535-a+1):a}}function readInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a=readUInt32(e,t,r,!0),s=2147483648&a;return s?-1*(4294967295-a+1):a}}function readFloat(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+3<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,23,4)}function readDouble(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+7<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,52,8)}function writeUInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"trying to write beyond buffer length"),verifuint(t,65535));var a=e.length;if(!(r>=a)){for(var s=0,o=Math.min(a-r,2);o>s;s++)e[r+s]=(t&255<<8*(n?s:1-s))>>>8*(n?s:1-s);return r+2}}function writeUInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"trying to write beyond buffer length"),verifuint(t,4294967295));var a=e.length;if(!(r>=a)){for(var s=0,o=Math.min(a-r,4);o>s;s++)e[r+s]=t>>>8*(n?s:3-s)&255;return r+4}}function writeInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"Trying to write beyond buffer length"),verifsint(t,32767,-32768));var a=e.length;if(!(r>=a))return t>=0?writeUInt16(e,t,r,n,i):writeUInt16(e,65535+t+1,r,n,i),r+2}function writeInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifsint(t,2147483647,-2147483648));var a=e.length;if(!(r>=a))return t>=0?writeUInt32(e,t,r,n,i):writeUInt32(e,4294967295+t+1,r,n,i),r+4}function writeFloat(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,3.4028234663852886e38,-3.4028234663852886e38));var a=e.length;if(!(r>=a))return ieee754.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+7<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,1.7976931348623157e308,-1.7976931348623157e308));var a=e.length;if(!(r>=a))return ieee754.write(e,t,r,n,52,8),r+8}function base64clean(e){for(e=stringtrim(e).replace(INVALID_BASE64_RE,"");e.length%4!==0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isArray(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function isArrayish(e){return isArray(e)||Buffer.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function toHex(e){return 16>e?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var a=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),s=0;s<a.length;s++)t.push(parseInt(a[s],16))}}return t}function asciiToBytes(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e){for(var t,r,n,i=[],a=0;a<e.length;a++)t=e.charCodeAt(a),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function base64ToBytes(e){return base64.toByteArray(e)}function blitBuffer(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function decodeUtf8Char(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function verifuint(e,t){assert("number"==typeof e,"cannot write a non-number as a number"),assert(e>=0,"specified a negative value for writing an unsigned value"),assert(t>=e,"value is larger than maximum value for type"),assert(Math.floor(e)===e,"value has a fractional component")}function verifsint(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value"),assert(Math.floor(e)===e,"value has a fractional component")}function verifIEEE754(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value")}function assert(e,t){if(!e)throw new Error(t||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}();Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(e){return!(null==e||!e._isBuffer)},Buffer.byteLength=function(e,t){var r;switch(e=e.toString(),t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=utf8ToBytes(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=base64ToBytes(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},Buffer.concat=function(e,t){if(assert(isArray(e),"Usage: Buffer.concat(list[, length])"),0===e.length)return new Buffer(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new Buffer(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(n,i),i+=a.length}return n},Buffer.compare=function(e,t){assert(Buffer.isBuffer(e)&&Buffer.isBuffer(t),"Arguments must be Buffers");for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);a>i&&e[i]===t[i];i++);return i!==a&&(r=e[i],n=t[i]),n>r?-1:r>n?1:0},Buffer.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var a=this.length-t;r?(r=Number(r),r>a&&(r=a)):r=a,n=String(n||"utf8").toLowerCase();var s;switch(n){case"hex":s=hexWrite(this,e,t,r);break;case"utf8":case"utf-8":s=utf8Write(this,e,t,r);break;case"ascii":s=asciiWrite(this,e,t,r);break;case"binary":s=binaryWrite(this,e,t,r);break;case"base64":s=base64Write(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":s=utf16leWrite(this,e,t,r);break;default:throw new Error("Unknown encoding")}return s},Buffer.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0===r?n.length:Number(r),r===t)return"";var i;switch(e){case"hex":i=hexSlice(n,t,r);break;case"utf8":case"utf-8":i=utf8Slice(n,t,r);break;case"ascii":i=asciiSlice(n,t,r);break;case"binary":i=binarySlice(n,t,r);break;case"base64":i=base64Slice(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=utf16leSlice(n,t,r);break;default:throw new Error("Unknown encoding")}return i},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.equals=function(e){return assert(Buffer.isBuffer(e),"Argument must be a Buffer"),0===Buffer.compare(this,e)},Buffer.prototype.compare=function(e){return assert(Buffer.isBuffer(e),"Argument must be a Buffer"),Buffer.compare(this,e)},Buffer.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){assert(n>=r,"sourceEnd < sourceStart"),assert(t>=0&&t<e.length,"targetStart out of bounds"),assert(r>=0&&r<i.length,"sourceStart out of bounds"),assert(n>=0&&n<=i.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;if(100>a||!TYPED_ARRAY_SUPPORT)for(var s=0;a>s;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},Buffer.prototype.slice=function(e,t){var r=this.length;if(e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e),TYPED_ARRAY_SUPPORT)return Buffer._augment(this.subarray(e,t));for(var n=t-e,i=new Buffer(n,void 0,!0),a=0;n>a;a++)i[a]=this[a+e];return i},Buffer.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},Buffer.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},Buffer.prototype.readUInt8=function(e,t){return t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},Buffer.prototype.readUInt16LE=function(e,t){return readUInt16(this,e,!0,t)},Buffer.prototype.readUInt16BE=function(e,t){return readUInt16(this,e,!1,t)},Buffer.prototype.readUInt32LE=function(e,t){return readUInt32(this,e,!0,t)},Buffer.prototype.readUInt32BE=function(e,t){return readUInt32(this,e,!1,t)},Buffer.prototype.readInt8=function(e,t){if(t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},Buffer.prototype.readInt16LE=function(e,t){return readInt16(this,e,!0,t)},Buffer.prototype.readInt16BE=function(e,t){return readInt16(this,e,!1,t)},Buffer.prototype.readInt32LE=function(e,t){return readInt32(this,e,!0,t)},Buffer.prototype.readInt32BE=function(e,t){return readInt32(this,e,!1,t)},Buffer.prototype.readFloatLE=function(e,t){return readFloat(this,e,!0,t)},Buffer.prototype.readFloatBE=function(e,t){return readFloat(this,e,!1,t)},Buffer.prototype.readDoubleLE=function(e,t){return readDouble(this,e,!0,t)},Buffer.prototype.readDoubleBE=function(e,t){return readDouble(this,e,!1,t)},Buffer.prototype.writeUInt8=function(e,t,r){return r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"trying to write beyond buffer length"),verifuint(e,255)),t>=this.length?void 0:(this[t]=e,t+1)},Buffer.prototype.writeUInt16LE=function(e,t,r){return writeUInt16(this,e,t,!0,r)},Buffer.prototype.writeUInt16BE=function(e,t,r){return writeUInt16(this,e,t,!1,r)},Buffer.prototype.writeUInt32LE=function(e,t,r){return writeUInt32(this,e,t,!0,r)},Buffer.prototype.writeUInt32BE=function(e,t,r){return writeUInt32(this,e,t,!1,r)},Buffer.prototype.writeInt8=function(e,t,r){return r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"Trying to write beyond buffer length"),verifsint(e,127,-128)),t>=this.length?void 0:(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r),t+1)},Buffer.prototype.writeInt16LE=function(e,t,r){return writeInt16(this,e,t,!0,r)},Buffer.prototype.writeInt16BE=function(e,t,r){return writeInt16(this,e,t,!1,r)},Buffer.prototype.writeInt32LE=function(e,t,r){return writeInt32(this,e,t,!0,r)},Buffer.prototype.writeInt32BE=function(e,t,r){return writeInt32(this,e,t,!1,r)},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),assert(r>=t,"end < start"),r!==t&&0!==this.length){assert(t>=0&&t<this.length,"start out of bounds"),assert(r>=0&&r<=this.length,"end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=utf8ToBytes(e.toString()),a=i.length;for(n=t;r>n;n++)this[n]=i[n%a]}return this}},Buffer.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=toHex(this[r]),r===exports.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=BP.get,e.set=BP.set,e.write=BP.write,e.toString=BP.toString,e.toLocaleString=BP.toString,e.toJSON=BP.toJSON,e.equals=BP.equals,e.compare=BP.compare,e.copy=BP.copy,e.slice=BP.slice,e.readUInt8=BP.readUInt8,e.readUInt16LE=BP.readUInt16LE,e.readUInt16BE=BP.readUInt16BE,e.readUInt32LE=BP.readUInt32LE,e.readUInt32BE=BP.readUInt32BE,e.readInt8=BP.readInt8,e.readInt16LE=BP.readInt16LE,e.readInt16BE=BP.readInt16BE,e.readInt32LE=BP.readInt32LE,e.readInt32BE=BP.readInt32BE,e.readFloatLE=BP.readFloatLE,e.readFloatBE=BP.readFloatBE,e.readDoubleLE=BP.readDoubleLE,e.readDoubleBE=BP.readDoubleBE,e.writeUInt8=BP.writeUInt8,e.writeUInt16LE=BP.writeUInt16LE,e.writeUInt16BE=BP.writeUInt16BE,e.writeUInt32LE=BP.writeUInt32LE,e.writeUInt32BE=BP.writeUInt32BE,e.writeInt8=BP.writeInt8,e.writeInt16LE=BP.writeInt16LE,e.writeInt16BE=BP.writeInt16BE,e.writeInt32LE=BP.writeInt32LE,e.writeInt32BE=BP.writeInt32BE,e.writeFloatLE=BP.writeFloatLE,e.writeFloatBE=BP.writeFloatBE,e.writeDoubleLE=BP.writeDoubleLE,e.writeDoubleBE=BP.writeDoubleBE,e.fill=BP.fill,e.inspect=BP.inspect,e.toArrayBuffer=BP.toArrayBuffer,e};var INVALID_BASE64_RE=/[^+\/0-9A-z]/g;
},{"base64-js":12,"ieee754":13}],12:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h?62:r===c?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);
},{}],13:[function(require,module,exports){
exports.read=function(o,t,a,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,n=a?h-1:0,s=a?-1:1,N=o[t+n];for(n+=s,M=N&(1<<-i)-1,N>>=-i,i+=w;i>0;M=256*M+o[t+n],n+=s,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+o[t+n],n+=s,i-=8);if(0===M)M=1-e;else{if(M===f)return p?0/0:1/0*(N?-1:1);p+=Math.pow(2,r),M-=e}return(N?-1:1)*p*Math.pow(2,M-r)},exports.write=function(o,t,a,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,n=i>>1,s=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=r?0:M-1,u=r?1:-1,l=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(w=isNaN(t)?1:0,p=i):(p=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-p))<1&&(p--,f*=2),t+=p+n>=1?s/f:s*Math.pow(2,1-n),t*f>=2&&(p++,f/=2),p+n>=i?(w=0,p=i):p+n>=1?(w=(t*f-1)*Math.pow(2,h),p+=n):(w=t*Math.pow(2,n-1)*Math.pow(2,h),p=0));h>=8;o[a+N]=255&w,N+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;o[a+N]=255&p,N+=u,p/=256,e-=8);o[a+N-u]|=128*l};
},{}],14:[function(require,module,exports){
(function(r){function e(e){return function(){var n=[],u={update:function(e,u){return r.isBuffer(e)||(e=new r(e,u)),n.push(e),this},digest:function(u){var t=r.concat(n),i=e(t);return n=null,u?i.toString(u):i}};return u}}var n=require("sha.js"),u=e(require("./md5")),t=e(require("ripemd160"));module.exports=function(r){return"md5"===r?new u:"rmd160"===r?new t:n(r)}}).call(this,require("buffer").Buffer);
},{"./md5":18,"buffer":11,"ripemd160":19,"sha.js":21}],15:[function(require,module,exports){
(function(t){function e(h,n){if(!(this instanceof e))return new e(h,n);this._opad=u,this._alg=h,n=this._key=t.isBuffer(n)?n:new t(n),n.length>s?n=i(h).update(n).digest():n.length<s&&(n=t.concat([n,a],s));for(var r=this._ipad=new t(s),u=this._opad=new t(s),o=0;s>o;o++)r[o]=54^n[o],u[o]=92^n[o];this._hash=i(h).update(r)}var i=require("./create-hash"),s=64,a=new t(s);a.fill(0),module.exports=e,e.prototype.update=function(t,e){return this._hash.update(t,e),this},e.prototype.digest=function(t){var e=this._hash.digest();return i(this._alg).update(this._opad).update(e).digest(t)}}).call(this,require("buffer").Buffer);
},{"./create-hash":14,"buffer":11}],16:[function(require,module,exports){
(function(n){function r(r,e){if(r.length%l!==0){var t=r.length+(l-r.length%l);r=n.concat([r,f],t)}for(var a=[],u=e?r.readInt32BE:r.readInt32LE,i=0;i<r.length;i+=l)a.push(u.call(r,i));return a}function e(r,e,t){for(var l=new n(e),f=t?l.writeInt32BE:l.writeInt32LE,a=0;a<r.length;a++)f.call(l,r[a],4*a,!0);return l}function t(t,l,f,u){n.isBuffer(t)||(t=new n(t));var i=l(r(t,u),t.length*a);return e(i,f,u)}var l=4,f=new n(l);f.fill(0);var a=8;module.exports={hash:t}}).call(this,require("buffer").Buffer);
},{"buffer":11}],17:[function(require,module,exports){
(function(e){function r(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function t(e,r){for(var t in e)r(e[t],t)}var c=require("./rng");exports.createHash=require("./create-hash"),exports.createHmac=require("./create-hmac"),exports.randomBytes=function(r,t){if(!t||!t.call)return new e(c(r));try{t.call(this,void 0,new e(c(r)))}catch(i){t(i)}},exports.getHashes=function(){return["sha1","sha256","md5","rmd160"]};var i=require("./pbkdf2")(exports.createHmac);exports.pbkdf2=i.pbkdf2,exports.pbkdf2Sync=i.pbkdf2Sync,t(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman"],function(e){exports[e]=function(){r("sorry,",e,"is not implemented yet")}})}).call(this,require("buffer").Buffer);
},{"./create-hash":14,"./create-hmac":15,"./pbkdf2":25,"./rng":26,"buffer":11}],18:[function(require,module,exports){
function core_md5(d,_){d[_>>5]|=128<<_%32,d[(_+64>>>9<<4)+14]=_;for(var m=1732584193,f=-271733879,i=-1732584194,h=271733878,g=0;g<d.length;g+=16){var r=m,n=f,e=i,a=h;m=md5_ff(m,f,i,h,d[g+0],7,-680876936),h=md5_ff(h,m,f,i,d[g+1],12,-389564586),i=md5_ff(i,h,m,f,d[g+2],17,606105819),f=md5_ff(f,i,h,m,d[g+3],22,-1044525330),m=md5_ff(m,f,i,h,d[g+4],7,-176418897),h=md5_ff(h,m,f,i,d[g+5],12,1200080426),i=md5_ff(i,h,m,f,d[g+6],17,-1473231341),f=md5_ff(f,i,h,m,d[g+7],22,-45705983),m=md5_ff(m,f,i,h,d[g+8],7,1770035416),h=md5_ff(h,m,f,i,d[g+9],12,-1958414417),i=md5_ff(i,h,m,f,d[g+10],17,-42063),f=md5_ff(f,i,h,m,d[g+11],22,-1990404162),m=md5_ff(m,f,i,h,d[g+12],7,1804603682),h=md5_ff(h,m,f,i,d[g+13],12,-40341101),i=md5_ff(i,h,m,f,d[g+14],17,-1502002290),f=md5_ff(f,i,h,m,d[g+15],22,1236535329),m=md5_gg(m,f,i,h,d[g+1],5,-165796510),h=md5_gg(h,m,f,i,d[g+6],9,-1069501632),i=md5_gg(i,h,m,f,d[g+11],14,643717713),f=md5_gg(f,i,h,m,d[g+0],20,-373897302),m=md5_gg(m,f,i,h,d[g+5],5,-701558691),h=md5_gg(h,m,f,i,d[g+10],9,38016083),i=md5_gg(i,h,m,f,d[g+15],14,-660478335),f=md5_gg(f,i,h,m,d[g+4],20,-405537848),m=md5_gg(m,f,i,h,d[g+9],5,568446438),h=md5_gg(h,m,f,i,d[g+14],9,-1019803690),i=md5_gg(i,h,m,f,d[g+3],14,-187363961),f=md5_gg(f,i,h,m,d[g+8],20,1163531501),m=md5_gg(m,f,i,h,d[g+13],5,-1444681467),h=md5_gg(h,m,f,i,d[g+2],9,-51403784),i=md5_gg(i,h,m,f,d[g+7],14,1735328473),f=md5_gg(f,i,h,m,d[g+12],20,-1926607734),m=md5_hh(m,f,i,h,d[g+5],4,-378558),h=md5_hh(h,m,f,i,d[g+8],11,-2022574463),i=md5_hh(i,h,m,f,d[g+11],16,1839030562),f=md5_hh(f,i,h,m,d[g+14],23,-35309556),m=md5_hh(m,f,i,h,d[g+1],4,-1530992060),h=md5_hh(h,m,f,i,d[g+4],11,1272893353),i=md5_hh(i,h,m,f,d[g+7],16,-155497632),f=md5_hh(f,i,h,m,d[g+10],23,-1094730640),m=md5_hh(m,f,i,h,d[g+13],4,681279174),h=md5_hh(h,m,f,i,d[g+0],11,-358537222),i=md5_hh(i,h,m,f,d[g+3],16,-722521979),f=md5_hh(f,i,h,m,d[g+6],23,76029189),m=md5_hh(m,f,i,h,d[g+9],4,-640364487),h=md5_hh(h,m,f,i,d[g+12],11,-421815835),i=md5_hh(i,h,m,f,d[g+15],16,530742520),f=md5_hh(f,i,h,m,d[g+2],23,-995338651),m=md5_ii(m,f,i,h,d[g+0],6,-198630844),h=md5_ii(h,m,f,i,d[g+7],10,1126891415),i=md5_ii(i,h,m,f,d[g+14],15,-1416354905),f=md5_ii(f,i,h,m,d[g+5],21,-57434055),m=md5_ii(m,f,i,h,d[g+12],6,1700485571),h=md5_ii(h,m,f,i,d[g+3],10,-1894986606),i=md5_ii(i,h,m,f,d[g+10],15,-1051523),f=md5_ii(f,i,h,m,d[g+1],21,-2054922799),m=md5_ii(m,f,i,h,d[g+8],6,1873313359),h=md5_ii(h,m,f,i,d[g+15],10,-30611744),i=md5_ii(i,h,m,f,d[g+6],15,-1560198380),f=md5_ii(f,i,h,m,d[g+13],21,1309151649),m=md5_ii(m,f,i,h,d[g+4],6,-145523070),h=md5_ii(h,m,f,i,d[g+11],10,-1120210379),i=md5_ii(i,h,m,f,d[g+2],15,718787259),f=md5_ii(f,i,h,m,d[g+9],21,-343485551),m=safe_add(m,r),f=safe_add(f,n),i=safe_add(i,e),h=safe_add(h,a)}return Array(m,f,i,h)}function md5_cmn(d,_,m,f,i,h){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,h)),i),m)}function md5_ff(d,_,m,f,i,h,g){return md5_cmn(_&m|~_&f,d,_,i,h,g)}function md5_gg(d,_,m,f,i,h,g){return md5_cmn(_&f|m&~f,d,_,i,h,g)}function md5_hh(d,_,m,f,i,h,g){return md5_cmn(_^m^f,d,_,i,h,g)}function md5_ii(d,_,m,f,i,h,g){return md5_cmn(m^(_|~f),d,_,i,h,g)}function safe_add(d,_){var m=(65535&d)+(65535&_),f=(d>>16)+(_>>16)+(m>>16);return f<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}var helpers=require("./helpers");module.exports=function(d){return helpers.hash(d,core_md5,16)};
},{"./helpers":16}],19:[function(require,module,exports){
(function(r){function n(r,n,t){return r^n^t}function t(r,n,t){return r&n|~r&t}function u(r,n,t){return(r|~n)^t}function e(r,n,t){return r&t|n&~t}function f(r,n,t){return r^(n|~t)}function o(r,n){return r<<n|r>>>32-n}function a(n){var t=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof n&&(n=new r(n,"utf8"));var u=s(n),e=8*n.length,f=8*n.length;u[e>>>5]|=128<<24-e%32,u[(e+64>>>9<<4)+14]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8);for(var o=0;o<u.length;o+=16)w(t,u,o);for(var o=0;5>o;o++){var a=t[o];t[o]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i=p(t);return new r(i)}module.exports=a;var i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],g=[1352829926,1548603684,1836072691,2053994217,0],s=function(r){for(var n=[],t=0,u=0;t<r.length;t++,u+=8)n[u>>>5]|=r[t]<<24-u%32;return n},p=function(r){for(var n=[],t=0;t<32*r.length;t+=8)n.push(r[t>>>5]>>>24-t%32&255);return n},w=function(r,a,s){for(var p=0;16>p;p++){var w=s+p,b=a[w];a[w]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8)}var d,m,q,x,y,B,j,k,z,A;B=d=r[0],j=m=r[1],k=q=r[2],z=x=r[3],A=y=r[4];for(var C,p=0;80>p;p+=1)C=d+a[s+i[p]]|0,C+=16>p?n(m,q,x)+h[0]:32>p?t(m,q,x)+h[1]:48>p?u(m,q,x)+h[2]:64>p?e(m,q,x)+h[3]:f(m,q,x)+h[4],C=0|C,C=o(C,c[p]),C=C+y|0,d=y,y=x,x=o(q,10),q=m,m=C,C=B+a[s+v[p]]|0,C+=16>p?f(j,k,z)+g[0]:32>p?e(j,k,z)+g[1]:48>p?u(j,k,z)+g[2]:64>p?t(j,k,z)+g[3]:n(j,k,z)+g[4],C=0|C,C=o(C,l[p]),C=C+A|0,B=A,A=z,z=o(k,10),k=j,j=C;C=r[1]+q+z|0,r[1]=r[2]+x+A|0,r[2]=r[3]+y+B|0,r[3]=r[4]+d+j|0,r[4]=r[0]+m+k|0,r[0]=C}}).call(this,require("buffer").Buffer);
},{"buffer":11}],20:[function(require,module,exports){
var u=require("./util"),write=u.write,fill=u.zeroFill;module.exports=function(t){function i(i,e){this._block=new t(i),this._finalSize=e,this._blockSize=i,this._len=0,this._s=0}function e(t,i){return null==i?t.byteLength||t.length:"ascii"==i||"binary"==i?t.length:"hex"==i?t.length/2:"base64"==i?t.length/3:void 0}return i.prototype.init=function(){this._s=0,this._len=0},i.prototype.update=function(i,n){var s,l=this._blockSize;n||"string"!=typeof i||(n="utf8"),n?("utf-8"===n&&(n="utf8"),("base64"===n||"utf8"===n)&&(i=new t(i,n),n=null),s=e(i,n)):s=i.byteLength||i.length;for(var h=this._len+=s,r=this._s=this._s||0,o=0,u=this._block;h>r;){var _=Math.min(s,o+l-r%l);write(u,i,n,r%l,o,_);var a=_-o;r+=a,o+=a,r%l||this._update(u)}return this._s=r,this},i.prototype.digest=function(t){var i=this._blockSize,e=this._finalSize,n=8*this._len,s=this._block,l=n%(8*i);s[this._len%i]=128,fill(this._block,this._len%i+1),l>=8*e&&(this._update(this._block),u.zeroFill(this._block,0)),s.writeInt32BE(n,e+4);var h=this._update(this._block)||this._hash();return null==t?h:h.toString(t)},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},i};
},{"./util":24}],21:[function(require,module,exports){
var exports=module.exports=function(r){var e=exports[r];if(!e)throw new Error(r+" is not supported (we accept pull requests)");return new e},Buffer=require("buffer").Buffer,Hash=require("./hash")(Buffer);exports.sha=exports.sha1=require("./sha1")(Buffer,Hash),exports.sha256=require("./sha256")(Buffer,Hash);
},{"./hash":20,"./sha1":22,"./sha256":23,"buffer":11}],22:[function(require,module,exports){
module.exports=function(t,i){function n(){return w.length?w.pop().init():this instanceof n?(this._w=f,i.call(this,64,56),this._h=null,void this.init()):new n}function r(t,i,n,r){return 20>t?i&n|~i&r:40>t?i^n^r:60>t?i&n|i&r|n&r:i^n^r}function h(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function e(t,i){return t+i|0}function s(t,i){return t<<i|t>>>32-i}var _=require("util").inherits;_(n,i);var o=0,u=4,a=8,c=12,p=16,f=new Int32Array(80),w=[];n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,i.prototype.init.call(this),this},n.prototype._POOL=w;new t(1)instanceof DataView;return n.prototype._update=function(){{var t,i,n,_,o,u,a,c,p,f,w=this._block;this._h}t=u=this._a,i=a=this._b,n=c=this._c,_=p=this._d,o=f=this._e;for(var l=this._w,d=0;80>d;d++){var v=l[d]=16>d?w.readInt32BE(4*d):s(l[d-3]^l[d-8]^l[d-14]^l[d-16],1),I=e(e(s(t,5),r(d,i,n,_)),e(e(o,v),h(d)));o=_,_=n,n=s(i,30),i=t,t=I}this._a=e(t,u),this._b=e(i,a),this._c=e(n,c),this._d=e(_,p),this._e=e(o,f)},n.prototype._hash=function(){w.length<100&&w.push(this);var i=new t(20);return i.writeInt32BE(0|this._a,o),i.writeInt32BE(0|this._b,u),i.writeInt32BE(0|this._c,a),i.writeInt32BE(0|this._d,c),i.writeInt32BE(0|this._e,p),i},n};
},{"util":30}],23:[function(require,module,exports){
var inherits=require("util").inherits,BE=!1,LE=!0,u=require("./util");module.exports=function(t,i){function h(){w.length,this.init(),this._w=a,i.call(this,64,56)}function n(t,i){return t>>>i|t<<32-i}function s(t,i){return t>>>i}function r(t,i,h){return t&i^~t&h}function _(t,i,h){return t&i^t&h^i&h}function e(t){return n(t,2)^n(t,13)^n(t,22)}function u(t){return n(t,6)^n(t,11)^n(t,25)}function o(t){return n(t,7)^n(t,18)^s(t,3)}function c(t){return n(t,17)^n(t,19)^s(t,10)}var f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];inherits(h,i);var a=new Array(64),w=[];h.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this};return h.prototype._update=function(){var t,i,h,n,s,a,w,E,B,l,p=this._block,I=this._w;t=0|this._a,i=0|this._b,h=0|this._c,n=0|this._d,s=0|this._e,a=0|this._f,w=0|this._g,E=0|this._h;for(var d=0;64>d;d++){var g=I[d]=16>d?p.readInt32BE(4*d):c(I[d-2])+I[d-7]+o(I[d-15])+I[d-16];B=E+u(s)+r(s,a,w)+f[d]+g,l=e(t)+_(t,i,h),E=w,w=a,a=s,s=n+B,n=h,h=i,i=t,t=B+l}this._a=t+this._a|0,this._b=i+this._b|0,this._c=h+this._c|0,this._d=n+this._d|0,this._e=s+this._e|0,this._f=a+this._f|0,this._g=w+this._g|0,this._h=E+this._h|0},h.prototype._hash=function(){w.length<10&&w.push(this);var i=new t(32);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i.writeInt32BE(this._h,28),i},h};
},{"./util":24,"util":30}],24:[function(require,module,exports){
function write(r,e,o,t,i,n){var a=n-i;if("ascii"===o||"binary"===o)for(var l=0;a>l;l++)r[t+l]=e.charCodeAt(l+i);else if(null==o)for(var l=0;a>l;l++)r[t+l]=e[l+i];else{if("hex"!==o)throw new Error("base64"===o?"base64 encoding not yet supported":o+" encoding not yet supported");for(var l=0;a>l;l++){var s=i+l;r[t+l]=parseInt(e[2*s]+e[2*s+1],16)}}}function zeroFill(r,e){for(var o=e;o<r.length;o++)r[o]=0}exports.write=write,exports.zeroFill=zeroFill,exports.toString=toString;
},{}],25:[function(require,module,exports){
(function(e){var r=64,t=new e(r);t.fill(0),module.exports=function(n,o){return o=o||{},o.pbkdf2=function(e,r,t,n,f){if("function"!=typeof f)throw new Error("No callback provided to pbkdf2");setTimeout(function(){f(null,o.pbkdf2Sync(e,r,t,n))})},o.pbkdf2Sync=function(o,f,a,i){if("number"!=typeof a)throw new TypeError("Iterations not a number");if(0>a)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(0>i)throw new TypeError("Bad key length");var o=e.isBuffer(o)?o:new e(o);o.length>r?o=createHash(alg).update(o).digest():o.length<r&&(o=e.concat([o,t],r));var u,p,d,l=0,c=1,w=new e(4),h=new e(i);for(h.fill(0);i;){p=i>20?20:i,w[0]=c>>24&255,w[1]=c>>16&255,w[2]=c>>8&255,w[3]=255&c,u=n("sha1",o),u.update(f),u.update(w),d=u.digest(),d.copy(h,l,0,p);for(var s=1;a>s;s++){u=n("sha1",o),u.update(d),d=u.digest();for(var y=0;p>y;y++)h[y]^=d[y]}i-=p,c++,l+=p}return h},o}}).call(this,require("buffer").Buffer);
},{"buffer":11}],26:[function(require,module,exports){
(function(e){!function(){module.exports=function(n){var r=new e(n);return crypto.getRandomValues(r),r}}()}).call(this,require("buffer").Buffer);
},{"buffer":11}],27:[function(require,module,exports){
module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],28:[function(require,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")};
},{}],29:[function(require,module,exports){
module.exports=require(9)
},{}],30:[function(require,module,exports){
module.exports=require(10)
},{"./support/isBuffer":29,"_process":28,"inherits":27}],31:[function(require,module,exports){
module.exports={newInvalidAsn1Error:function(r){var n=new Error;return n.name="InvalidAsn1Error",n.message=r||"",n}};
},{}],32:[function(require,module,exports){
var errors=require("./errors"),types=require("./types"),Reader=require("./reader"),Writer=require("./writer");module.exports={Reader:Reader,Writer:Writer};for(var t in types)types.hasOwnProperty(t)&&(module.exports[t]=types[t]);for(var e in errors)errors.hasOwnProperty(e)&&(module.exports[e]=errors[e]);
},{"./errors":31,"./reader":33,"./types":34,"./writer":35}],33:[function(require,module,exports){
(function(t){function e(e){if(!e||!t.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0;var r=this;this.__defineGetter__("length",function(){return r._len}),this.__defineGetter__("offset",function(){return r._offset}),this.__defineGetter__("remain",function(){return r._size-r._offset}),this.__defineGetter__("buffer",function(){return r._buf.slice(r._offset)})}var r=require("assert"),n=require("./types"),i=require("./errors"),f=i.newInvalidAsn1Error;e.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},e.prototype.peek=function(){return this.readByte(!0)},e.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(e&=127,0==e)throw f("Indefinite length not supported");if(e>4)throw f("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;e>r;r++)this._len=(this._len<<8)+(255&this._buf[t++])}else this._len=e;return t},e.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw f("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},e.prototype.readInt=function(){return this._readTag(n.Integer)},e.prototype.readBoolean=function(){return 0===this._readTag(n.Boolean)?!1:!0},e.prototype.readEnumeration=function(){return this._readTag(n.Enumeration)},e.prototype.readString=function(t,e){t||(t=n.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw f("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>this._size-i)return null;if(this._offset=i,0===this.length)return"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?o:o.toString("utf8")},e.prototype.readOID=function(t){t||(t=n.OID);var e=this.readString(t,!0);if(null===e)return null;for(var r=[],i=0,f=0;f<e.length;f++){var o=255&e[f];i<<=7,i+=127&o,0==(128&o)&&(r.push(i),i=0)}return i=r.shift(),r.unshift(i%40),r.unshift(i/40>>0),r.join(".")},e.prototype._readTag=function(t){r.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw f("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>4)throw f("Integer too long: "+this.length);if(this.length>this._size-n)return null;this._offset=n;for(var i=this._buf[this._offset],o=0,s=0;s<this.length;s++)o<<=8,o|=255&this._buf[this._offset++];return 128==(128&i)&&4!==s&&(o-=1<<8*s),o>>0},module.exports=e}).call(this,require("buffer").Buffer);
},{"./errors":31,"./types":34,"assert":8,"buffer":11}],34:[function(require,module,exports){
module.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128};
},{}],35:[function(require,module,exports){
(function(t){function e(t,e){r.ok(t),r.equal(typeof t,"object"),r.ok(e),r.equal(typeof e,"object");var s=Object.getOwnPropertyNames(t);return s.forEach(function(s){if(!e[s]){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,r)}}),e}function s(s){s=e(o,s||{}),this._buf=new t(s.size||1024),this._size=this._buf.length,this._offset=0,this._options=s,this._seq=[];var r=this;this.__defineGetter__("buffer",function(){if(r._seq.length)throw new InvalidAsn1Error(r._seq.length+" unended sequence(s)");return r._buf.slice(0,r._offset)})}var r=require("assert"),i=require("./types"),f=require("./errors"),o=(f.newInvalidAsn1Error,{size:1024,growthFactor:8});s.prototype.writeByte=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},s.prototype.writeInt=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");"number"!=typeof e&&(e=i.Integer);for(var s=4;(0===(4286578688&t)||-8388608===(4286578688&t))&&s>1;)s--,t<<=8;if(s>4)throw new InvalidAsn1Error("BER ints cannot be > 0xffffffff");for(this._ensure(2+s),this._buf[this._offset++]=e,this._buf[this._offset++]=s;s-->0;)this._buf[this._offset++]=(4278190080&t)>>>24,t<<=8},s.prototype.writeNull=function(){this.writeByte(i.Null),this.writeByte(0)},s.prototype.writeEnumeration=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");return"number"!=typeof e&&(e=i.Enumeration),this.writeInt(t,e)},s.prototype.writeBoolean=function(t,e){if("boolean"!=typeof t)throw new TypeError("argument must be a Boolean");"number"!=typeof e&&(e=i.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},s.prototype.writeString=function(e,s){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof s&&(s=i.OctetString);var r=t.byteLength(e);this.writeByte(s),this.writeLength(r),r&&(this._ensure(r),this._buf.write(e,this._offset),this._offset+=r)},s.prototype.writeBuffer=function(e,s){if("number"!=typeof s)throw new TypeError("tag must be a number");if(!t.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(s),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},s.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(t){e.writeString(t)})},s.prototype.writeOID=function(t,e){function s(t,e){128>e?t.push(e):16384>e?(t.push(e>>>7|128),t.push(127&e)):2097152>e?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):268435456>e?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}if("string"!=typeof t)throw new TypeError("argument must be a string");if("number"!=typeof e&&(e=i.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var r=t.split("."),f=[];f.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach(function(t){s(f,parseInt(t,10))});var o=this;this._ensure(2+f.length),this.writeByte(e),this.writeLength(f.length),f.forEach(function(t){o.writeByte(t)})},s.prototype.writeLength=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),127>=t)this._buf[this._offset++]=t;else if(255>=t)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(65535>=t)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(16777215>=t))throw new InvalidAsn1ERror("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},s.prototype.startSequence=function(t){"number"!=typeof t&&(t=i.Sequence|i.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},s.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,s=this._offset-e;if(127>=s)this._shift(e,s,-2),this._buf[t]=s;else if(255>=s)this._shift(e,s,-1),this._buf[t]=129,this._buf[t+1]=s;else if(65535>=s)this._buf[t]=130,this._buf[t+1]=s>>8,this._buf[t+2]=s;else{if(!(16777215>=s))throw new InvalidAsn1Error("Sequence too long");this._shift(e,s,1),this._buf[t]=131,this._buf[t+1]=s>>16,this._buf[t+2]=s>>8,this._buf[t+3]=s}},s.prototype._shift=function(t,e,s){r.ok(void 0!==t),r.ok(void 0!==e),r.ok(s),this._buf.copy(this._buf,t+s,t,t+e),this._offset+=s},s.prototype._ensure=function(e){if(r.ok(e),this._size-this._offset<e){var s=this._size*this._options.growthFactor;s-this._offset<e&&(s+=e);var i=new t(s);this._buf.copy(i,0,0,this._offset),this._buf=i,this._size=s}},module.exports=s}).call(this,require("buffer").Buffer);
},{"./errors":31,"./types":34,"assert":8,"buffer":11}],36:[function(require,module,exports){
var Ber=require("./ber/index");module.exports={Ber:Ber,BerReader:Ber.Reader,BerWriter:Ber.Writer};
},{"./ber/index":32}],37:[function(require,module,exports){
(function(n){(function(){function t(n,t,r){for(var e=(r||0)-1,u=n?n.length:0;++e<u;)if(n[e]===t)return e;return-1}function r(n,r){var e=typeof r;if(n=n.cache,"boolean"==e||null==r)return n[r]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?r:d+r;return n=(n=n[e])&&n[u],"object"==e?n&&t(n,r)>-1?0:-1:n?0:-1}function e(n){var t=this.cache,r=typeof n;if("boolean"==r||null==n)t[n]=!0;else{"number"!=r&&"string"!=r&&(r="object");var e="number"==r?n:d+n,u=t[r]||(t[r]={});"object"==r?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function u(n){return n.charCodeAt(0)}function o(n,t){for(var r=n.criteria,e=t.criteria,u=-1,o=r.length;++u<o;){var a=r[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-t.index}function a(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=l();i["false"]=i["null"]=i["true"]=i.undefined=!1;var f=l();for(f.array=n,f.cache=i,f.push=e;++t<r;)f.push(n[t]);return f}function i(n){return"\\"+H[n]}function f(){return g.pop()||[]}function l(){return y.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(n){n.length=0,g.length<_&&g.push(n)}function p(n){var t=n.cache;t&&p(t),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,y.length<_&&y.push(n)}function s(n,t,r){t||(t=0),"undefined"==typeof r&&(r=n?n.length:0);for(var e=-1,u=r-t||0,o=Array(0>u?0:u);++e<u;)o[e]=n[t+e];return o}function v(n){function e(n){return n&&"object"==typeof n&&!Xe(n)&&De.call(n,"__wrapped__")?n:new g(n)}function g(n,t){this.__chain__=!!t,this.__wrapped__=n}function y(n){function t(){if(e){var n=s(e);Te.apply(n,arguments)}if(this instanceof t){var o=H(r.prototype),a=r.apply(o,n||arguments);return It(a)?a:o}return r.apply(u,n||arguments)}var r=n[0],e=n[2],u=n[4];return Qe(t,n),t}function _(n,t,r,e,u){if(r){var o=r(n);if("undefined"!=typeof o)return o}var a=It(n);if(!a)return n;var i=Oe.call(n);if(!U[i])return n;var l=He[i];switch(i){case B:case W:return new l(+n);case z:case K:return new l(n);case P:return o=l(n.source,O.exec(n)),o.lastIndex=n.lastIndex,o}var p=Xe(n);if(t){var v=!e;e||(e=f()),u||(u=f());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=p?l(n.length):{}}else o=p?s(n):uu({},n);return p&&(De.call(n,"index")&&(o.index=n.index),De.call(n,"input")&&(o.input=n.input)),t?(e.push(n),u.push(o),(p?Qt:iu)(n,function(n,a){o[a]=_(n,t,r,e,u)}),v&&(c(e),c(u)),o):o}function H(n){return It(n)?qe(n):{}}function Q(n,t,r){if("function"!=typeof n)return Xr;if("undefined"==typeof t||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Je.funcNames&&(e=!n.name),e=e||!Je.funcDecomp,!e)){var u=Se.call(n);Je.funcNames||(e=!N.test(u)),e||(e=S.test(u),Qe(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)}}return Tr(n,t)}function X(n){function t(){var n=f?a:this;if(u){var h=s(u);Te.apply(h,arguments)}if((o||c)&&(h||(h=s(arguments)),o&&Te.apply(h,o),c&&h.length<i))return e|=16,X([r,p?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(r=n[v]),this instanceof t){n=H(r.prototype);var g=r.apply(n,h);return It(g)?g:n}return r.apply(n,h)}var r=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,p=8&e,v=r;return Qe(t,n),t}function Y(n,e){var u=-1,o=ft(),i=n?n.length:0,f=i>=b&&o===t,l=[];if(f){var c=a(e);c?(o=r,e=c):f=!1}for(;++u<i;){var s=n[u];o(e,s)<0&&l.push(s)}return f&&p(e),l}function Z(n,t,r,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Xe(i)||st(i))){t||(i=Z(i,t,r));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else r||a.push(i)}return a}function tt(n,t,r,e,u,o){if(r){var a=r(n,t);if("undefined"!=typeof a)return!!a}if(n===t)return 0!==n||1/n==1/t;var i=typeof n,l=typeof t;if(!(n!==n||n&&G[i]||t&&G[l]))return!1;if(null==n||null==t)return n===t;var p=Oe.call(n),s=Oe.call(t);if(p==$&&(p=L),s==$&&(s=L),p!=s)return!1;switch(p){case B:case W:return+n==+t;case z:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case P:case K:return n==we(t)}var v=p==F;if(!v){var h=De.call(n,"__wrapped__"),g=De.call(t,"__wrapped__");if(h||g)return tt(h?n.__wrapped__:n,g?t.__wrapped__:t,r,e,u,o);if(p!=L)return!1;var y=n.constructor,m=t.constructor;if(y!=m&&!(Et(y)&&y instanceof y&&Et(m)&&m instanceof m)&&"constructor"in n&&"constructor"in t)return!1}var d=!u;u||(u=f()),o||(o=f());for(var b=u.length;b--;)if(u[b]==n)return o[b]==t;var _=0;if(a=!0,u.push(n),o.push(t),v){if(b=n.length,_=t.length,a=_==b,a||e)for(;_--;){var w=b,j=t[_];if(e)for(;w--&&!(a=tt(n[w],j,r,e,u,o)););else if(!(a=tt(n[_],j,r,e,u,o)))break}}else au(t,function(t,i,f){return De.call(f,i)?(_++,a=De.call(n,i)&&tt(n[i],t,r,e,u,o)):void 0}),a&&!e&&au(n,function(n,t,r){return De.call(r,t)?a=--_>-1:void 0});return u.pop(),o.pop(),d&&(c(u),c(o)),a}function rt(n,t,r,e,u){(Xe(t)?Qt:iu)(t,function(t,o){var a,i,f=t,l=n[o];if(t&&((i=Xe(t))||fu(t))){for(var c=e.length;c--;)if(a=e[c]==t){l=u[c];break}if(!a){var p;r&&(f=r(l,t),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Xe(l)?l:[]:fu(l)?l:{}),e.push(t),u.push(l),p||rt(l,t,r,e,u)}}else r&&(f=r(l,t),"undefined"==typeof f&&(f=t)),"undefined"!=typeof f&&(l=f);n[o]=l})}function et(n,t){return n+Ie(Ge()*(t-n+1))}function ut(n,e,u){var o=-1,i=ft(),l=n?n.length:0,s=[],v=!e&&l>=b&&i===t,h=u||v?f():s;if(v){var g=a(h);i=r,h=g}for(;++o<l;){var y=n[o],m=u?u(y,o,n):y;(e?!o||h[h.length-1]!==m:i(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(c(h.array),p(h)):u&&c(h),s}function ot(n){return function(t,r,u){var o={};r=e.createCallback(r,u,3);var a=-1,i=t?t.length:0;if("number"==typeof i)for(;++a<i;){var f=t[a];n(o,f,r(f,a,t),t)}else iu(t,function(t,e,u){n(o,t,r(t,e,u),u)});return o}}function at(n,t,r,e,u,o){var a=1&t,i=2&t,f=4&t,l=16&t,c=32&t;if(!i&&!Et(n))throw new je;l&&!r.length&&(t&=-17,l=r=!1),c&&!e.length&&(t&=-33,c=e=!1);var p=n&&n.__bindData__;if(p&&p!==!0)return p=s(p),p[2]&&(p[2]=s(p[2])),p[3]&&(p[3]=s(p[3])),!a||1&p[1]||(p[4]=u),!a&&1&p[1]&&(t|=8),!f||4&p[1]||(p[5]=o),l&&Te.apply(p[2]||(p[2]=[]),r),c&&Be.apply(p[3]||(p[3]=[]),e),p[1]|=t,at.apply(null,p);var v=1==t||17===t?y:X;return v([n,t,r,e,u,o])}function it(n){return nu[n]}function ft(){var n=(n=e.indexOf)===mr?t:n;return n}function lt(n){return"function"==typeof n&&Ne.test(n)}function ct(n){var t,r;return n&&Oe.call(n)==L&&(t=n.constructor,!Et(t)||t instanceof t)?(au(n,function(n,t){r=t}),"undefined"==typeof r||De.call(n,r)):!1}function pt(n){return tu[n]}function st(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==$||!1}function vt(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r=t,t=!1),_(n,t,"function"==typeof r&&Q(r,e,1))}function ht(n,t,r){return _(n,!0,"function"==typeof t&&Q(t,r,1))}function gt(n,t){var r=H(n);return t?uu(r,t):r}function yt(n,t,r){var u;return t=e.createCallback(t,r,3),iu(n,function(n,r,e){return t(n,r,e)?(u=r,!1):void 0}),u}function mt(n,t,r){var u;return t=e.createCallback(t,r,3),bt(n,function(n,r,e){return t(n,r,e)?(u=r,!1):void 0}),u}function dt(n,t,r){var e=[];au(n,function(n,t){e.push(t,n)});var u=e.length;for(t=Q(t,r,3);u--&&t(e[u--],e[u],n)!==!1;);return n}function bt(n,t,r){var e=Ze(n),u=e.length;for(t=Q(t,r,3);u--;){var o=e[u];if(t(n[o],o,n)===!1)break}return n}function _t(n){var t=[];return au(n,function(n,r){Et(n)&&t.push(r)}),t.sort()}function wt(n,t){return n?De.call(n,t):!1}function jt(n){for(var t=-1,r=Ze(n),e=r.length,u={};++t<e;){var o=r[t];u[n[o]]=o}return u}function kt(n){return n===!0||n===!1||n&&"object"==typeof n&&Oe.call(n)==B||!1}function xt(n){return n&&"object"==typeof n&&Oe.call(n)==W||!1}function Ct(n){return n&&1===n.nodeType||!1}function Ot(n){var t=!0;if(!n)return t;var r=Oe.call(n),e=n.length;return r==F||r==K||r==$||r==L&&"number"==typeof e&&Et(n.splice)?!e:(iu(n,function(){return t=!1}),t)}function Nt(n,t,r,e){return tt(n,t,"function"==typeof r&&Q(r,e,2))}function Rt(n){return Le(n)&&!Pe(parseFloat(n))}function Et(n){return"function"==typeof n}function It(n){return!(!n||!G[typeof n])}function St(n){return Dt(n)&&n!=+n}function At(n){return null===n}function Dt(n){return"number"==typeof n||n&&"object"==typeof n&&Oe.call(n)==z||!1}function Tt(n){return n&&"object"==typeof n&&Oe.call(n)==P||!1}function $t(n){return"string"==typeof n||n&&"object"==typeof n&&Oe.call(n)==K||!1}function Ft(n){return"undefined"==typeof n}function Bt(n,t,r){var u={};return t=e.createCallback(t,r,3),iu(n,function(n,r,e){u[r]=t(n,r,e)}),u}function Wt(n){var t=arguments,r=2;if(!It(n))return n;if("number"!=typeof t[2]&&(r=t.length),r>3&&"function"==typeof t[r-2])var e=Q(t[--r-1],t[r--],2);else r>2&&"function"==typeof t[r-1]&&(e=t[--r]);for(var u=s(arguments,1,r),o=-1,a=f(),i=f();++o<r;)rt(n,u[o],e,a,i);return c(a),c(i),n}function qt(n,t,r){var u={};if("function"!=typeof t){var o=[];au(n,function(n,t){o.push(t)}),o=Y(o,Z(arguments,!0,!1,1));for(var a=-1,i=o.length;++a<i;){var f=o[a];u[f]=n[f]}}else t=e.createCallback(t,r,3),au(n,function(n,r,e){t(n,r,e)||(u[r]=n)});return u}function zt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Lt(n,t,r){var u={};if("function"!=typeof t)for(var o=-1,a=Z(arguments,!0,!1,1),i=It(n)?a.length:0;++o<i;){var f=a[o];f in n&&(u[f]=n[f])}else t=e.createCallback(t,r,3),au(n,function(n,r,e){t(n,r,e)&&(u[r]=n)});return u}function Pt(n,t,r,u){var o=Xe(n);if(null==r)if(o)r=[];else{var a=n&&n.constructor,i=a&&a.prototype;r=H(i)}return t&&(t=e.createCallback(t,u,4),(o?Qt:iu)(n,function(n,e,u){return t(r,n,e,u)})),r}function Kt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;)u[t]=n[r[t]];return u}function Ut(n){for(var t=arguments,r=-1,e=Z(t,!0,!1,1),u=t[2]&&t[2][t[1]]===n?1:e.length,o=ve(u);++r<u;)o[r]=n[e[r]];return o}function Mt(n,t,r){var e=-1,u=ft(),o=n?n.length:0,a=!1;return r=(0>r?Ue(0,o+r):r)||0,Xe(n)?a=u(n,t,r)>-1:"number"==typeof o?a=($t(n)?n.indexOf(t,r):u(n,t,r))>-1:iu(n,function(n){return++e>=r?!(a=n===t):void 0}),a}function Vt(n,t,r){var u=!0;t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a&&(u=!!t(n[o],o,n)););else iu(n,function(n,r,e){return u=!!t(n,r,e)});return u}function Gt(n,t,r){var u=[];t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a;){var i=n[o];t(i,o,n)&&u.push(i)}else iu(n,function(n,r,e){t(n,r,e)&&u.push(n)});return u}function Ht(n,t,r){t=e.createCallback(t,r,3);var u=-1,o=n?n.length:0;if("number"!=typeof o){var a;return iu(n,function(n,r,e){return t(n,r,e)?(a=n,!1):void 0}),a}for(;++u<o;){var i=n[u];if(t(i,u,n))return i}}function Jt(n,t,r){var u;return t=e.createCallback(t,r,3),Xt(n,function(n,r,e){return t(n,r,e)?(u=n,!1):void 0}),u}function Qt(n,t,r){var e=-1,u=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof u)for(;++e<u&&t(n[e],e,n)!==!1;);else iu(n,t);return n}function Xt(n,t,r){var e=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof e)for(;e--&&t(n[e],e,n)!==!1;);else{var u=Ze(n);e=u.length,iu(n,function(n,r,o){return r=u?u[--e]:--e,t(o[r],r,o)})}return n}function Yt(n,t){var r=s(arguments,2),e=-1,u="function"==typeof t,o=n?n.length:0,a=ve("number"==typeof o?o:0);return Qt(n,function(n){a[++e]=(u?t:n[t]).apply(n,r)}),a}function Zt(n,t,r){var u=-1,o=n?n.length:0;if(t=e.createCallback(t,r,3),"number"==typeof o)for(var a=ve(o);++u<o;)a[u]=t(n[u],u,n);else a=[],iu(n,function(n,r,e){a[++u]=t(n,r,e)});return a}function nr(n,t,r){var o=-1/0,a=o;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var i=-1,f=n.length;++i<f;){var l=n[i];l>a&&(a=l)}else t=null==t&&$t(n)?u:e.createCallback(t,r,3),Qt(n,function(n,r,e){var u=t(n,r,e);u>o&&(o=u,a=n)});return a}function tr(n,t,r){var o=1/0,a=o;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var i=-1,f=n.length;++i<f;){var l=n[i];a>l&&(a=l)}else t=null==t&&$t(n)?u:e.createCallback(t,r,3),Qt(n,function(n,r,e){var u=t(n,r,e);o>u&&(o=u,a=n)});return a}function rr(n,t,r,u){if(!n)return r;var o=arguments.length<3;t=e.createCallback(t,u,4);var a=-1,i=n.length;if("number"==typeof i)for(o&&(r=n[++a]);++a<i;)r=t(r,n[a],a,n);else iu(n,function(n,e,u){r=o?(o=!1,n):t(r,n,e,u)});return r}function er(n,t,r,u){var o=arguments.length<3;return t=e.createCallback(t,u,4),Xt(n,function(n,e,u){r=o?(o=!1,n):t(r,n,e,u)}),r}function ur(n,t,r){return t=e.createCallback(t,r,3),Gt(n,function(n,r,e){return!t(n,r,e)})}function or(n,t,r){if(n&&"number"!=typeof n.length&&(n=Kt(n)),null==t||r)return n?n[et(0,n.length-1)]:h;var e=ar(n);return e.length=Me(Ue(0,t),e.length),e}function ar(n){var t=-1,r=n?n.length:0,e=ve("number"==typeof r?r:0);return Qt(n,function(n){var r=et(0,++t);e[t]=e[r],e[r]=n}),e}function ir(n){var t=n?n.length:0;return"number"==typeof t?t:Ze(n).length}function fr(n,t,r){var u;t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a&&!(u=t(n[o],o,n)););else iu(n,function(n,r,e){return!(u=t(n,r,e))});return!!u}function lr(n,t,r){var u=-1,a=Xe(t),i=n?n.length:0,s=ve("number"==typeof i?i:0);for(a||(t=e.createCallback(t,r,3)),Qt(n,function(n,r,e){var o=s[++u]=l();a?o.criteria=Zt(t,function(t){return n[t]}):(o.criteria=f())[0]=t(n,r,e),o.index=u,o.value=n}),i=s.length,s.sort(o);i--;){var v=s[i];s[i]=v.value,a||c(v.criteria),p(v)}return s}function cr(n){return n&&"number"==typeof n.length?s(n):Kt(n)}function pr(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e}function sr(n){return Y(n,Z(arguments,!0,!0,1))}function vr(n,t,r){var u=-1,o=n?n.length:0;for(t=e.createCallback(t,r,3);++u<o;)if(t(n[u],u,n))return u;return-1}function hr(n,t,r){var u=n?n.length:0;for(t=e.createCallback(t,r,3);u--;)if(t(n[u],u,n))return u;return-1}function gr(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=e.createCallback(t,r,3);++a<o&&t(n[a],a,n);)u++}else if(u=t,null==u||r)return n?n[0]:h;return s(n,0,Me(Ue(0,u),o))}function yr(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r="function"!=typeof t&&e&&e[t]===n?null:t,t=!1),null!=r&&(n=Zt(n,r,e)),Z(n,t)}function mr(n,r,e){if("number"==typeof e){var u=n?n.length:0;e=0>e?Ue(0,u+e):e||0}else if(e){var o=Or(n,r);return n[o]===r?o:-1}return t(n,r,e)}function dr(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=o;for(t=e.createCallback(t,r,3);a--&&t(n[a],a,n);)u++}else u=null==t||r?1:t||u;return s(n,0,Me(Ue(0,o-u),o))}function br(){for(var n=[],e=-1,u=arguments.length,o=f(),i=ft(),l=i===t,s=f();++e<u;){var v=arguments[e];(Xe(v)||st(v))&&(n.push(v),o.push(l&&v.length>=b&&a(e?n[e]:s)))}var h=n[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=o[0];if(v=h[g],(d?r(d,v):i(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=o[e],(d?r(d,v):i(n[e],v))<0)continue n;m.push(v)}}for(;u--;)d=o[u],d&&p(d);return c(o),c(s),m}function _r(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=o;for(t=e.createCallback(t,r,3);a--&&t(n[a],a,n);)u++}else if(u=t,null==u||r)return n?n[o-1]:h;return s(n,Ue(0,o-u))}function wr(n,t,r){var e=n?n.length:0;for("number"==typeof r&&(e=(0>r?Ue(0,e+r):Me(r,e-1))+1);e--;)if(n[e]===t)return e;return-1}function jr(n){for(var t=arguments,r=0,e=t.length,u=n?n.length:0;++r<e;)for(var o=-1,a=t[r];++o<u;)n[o]===a&&(Fe.call(n,o--,1),u--);return n}function kr(n,t,r){n=+n||0,r="number"==typeof r?r:+r||1,null==t&&(t=n,n=0);for(var e=-1,u=Ue(0,Re((t-n)/(r||1))),o=ve(u);++e<u;)o[e]=n,n+=r;return o}function xr(n,t,r){var u=-1,o=n?n.length:0,a=[];for(t=e.createCallback(t,r,3);++u<o;){var i=n[u];t(i,u,n)&&(a.push(i),Fe.call(n,u--,1),o--)}return a}function Cr(n,t,r){if("number"!=typeof t&&null!=t){var u=0,o=-1,a=n?n.length:0;for(t=e.createCallback(t,r,3);++o<a&&t(n[o],o,n);)u++}else u=null==t||r?1:Ue(0,t);return s(n,u)}function Or(n,t,r,u){var o=0,a=n?n.length:o;for(r=r?e.createCallback(r,u,1):Xr,t=r(t);a>o;){var i=o+a>>>1;r(n[i])<t?o=i+1:a=i}return o}function Nr(){return ut(Z(arguments,!0,!0))}function Rr(n,t,r,u){return"boolean"!=typeof t&&null!=t&&(u=r,r="function"!=typeof t&&u&&u[t]===n?null:t,t=!1),null!=r&&(r=e.createCallback(r,u,3)),ut(n,t,r)}function Er(n){return Y(n,s(arguments,1))}function Ir(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Xe(r)||st(r))var e=e?ut(Y(e,r).concat(Y(r,e))):r}return e||[]}function Sr(){for(var n=arguments.length>1?arguments:arguments[0],t=-1,r=n?nr(su(n,"length")):0,e=ve(0>r?0:r);++t<r;)e[t]=su(n,t);return e}function Ar(n,t){var r=-1,e=n?n.length:0,u={};for(t||!e||Xe(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Dr(n,t){if(!Et(t))throw new je;return function(){return--n<1?t.apply(this,arguments):void 0}}function Tr(n,t){return arguments.length>2?at(n,17,s(arguments,2),null,t):at(n,1,null,null,t)}function $r(n){for(var t=arguments.length>1?Z(arguments,!0,!1,1):_t(n),r=-1,e=t.length;++r<e;){var u=t[r];n[u]=at(n[u],1,null,null,n)}return n}function Fr(n,t){return arguments.length>2?at(t,19,s(arguments,2),null,n):at(t,3,null,null,n)}function Br(){for(var n=arguments,t=n.length;t--;)if(!Et(n[t]))throw new je;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}}function Wr(n,t){return t="number"==typeof t?t:+t||n.length,at(n,4,null,null,null,t)}function qr(n,t,r){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!Et(n))throw new je;if(t=Ue(0,t)||0,r===!0){var v=!0;s=!1}else It(r)&&(v=r.leading,p="maxWait"in r&&(Ue(t,r.maxWait)||0),s="trailing"in r?r.trailing:s);var g=function(){var r=t-(hu()-a);if(0>=r){u&&Ee(u);var p=l;u=f=l=h,p&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))}else f=$e(g,r)},y=function(){f&&Ee(f),u=f=l=h,(s||p!==t)&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=hu(),i=this,l=s&&(f||!v),p===!1)var r=v&&!f;else{u||v||(c=a);var h=p-(a-c),m=0>=h;m?(u&&(u=Ee(u)),c=a,o=n.apply(i,e)):u||(u=$e(y,h))}return m&&f?f=Ee(f):f||t===p||(f=$e(g,t)),r&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function zr(n){if(!Et(n))throw new je;var t=s(arguments,1);return $e(function(){n.apply(h,t)},1)}function Lr(n,t){if(!Et(n))throw new je;var r=s(arguments,2);return $e(function(){n.apply(h,r)},t)}function Pr(n,t){if(!Et(n))throw new je;var r=function(){var e=r.cache,u=t?t.apply(this,arguments):d+arguments[0];return De.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return r.cache={},r}function Kr(n){var t,r;if(!Et(n))throw new je;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}}function Ur(n){return at(n,16,s(arguments,1))}function Mr(n){return at(n,32,null,s(arguments,1))}function Vr(n,t,r){var e=!0,u=!0;if(!Et(n))throw new je;return r===!1?e=!1:It(r)&&(e="leading"in r?r.leading:e,u="trailing"in r?r.trailing:u),M.leading=e,M.maxWait=t,M.trailing=u,qr(n,t,M)}function Gr(n,t){return at(t,16,[n])}function Hr(n){return function(){return n}}function Jr(n,t,r){var e=typeof n;if(null==n||"function"==e)return Q(n,t,r);if("object"!=e)return te(n);var u=Ze(n),o=u[0],a=n[o];return 1!=u.length||a!==a||It(a)?function(t){for(var r=u.length,e=!1;r--&&(e=tt(t[u[r]],n[u[r]],null,!0)););return e}:function(n){var t=n[o];return a===t&&(0!==a||1/a==1/t)}}function Qr(n){return null==n?"":we(n).replace(eu,it)}function Xr(n){return n}function Yr(n,t,r){var u=!0,o=t&&_t(t);t&&(r||o.length)||(null==r&&(r=t),a=g,t=n,n=e,o=_t(t)),r===!1?u=!1:It(r)&&"chain"in r&&(u=r.chain);var a=n,i=Et(a);Qt(o,function(r){var e=n[r]=t[r];i&&(a.prototype[r]=function(){var t=this.__chain__,r=this.__wrapped__,o=[r];Te.apply(o,arguments);var i=e.apply(n,o);if(u||t){if(r===i&&It(i))return this;i=new a(i),i.__chain__=t}return i})})}function Zr(){return n._=Ce,this}function ne(){}function te(n){return function(t){return t[n]}}function re(n,t,r){var e=null==n,u=null==t;if(null==r&&("boolean"==typeof n&&u?(r=n,n=1):u||"boolean"!=typeof t||(r=t,u=!0)),e&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ge();return Me(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return et(n,t)}function ee(n,t){if(n){var r=n[t];return Et(r)?n[t]():r}}function ue(n,t,r){var u=e.templateSettings;n=we(n||""),r=ou({},r,u);var o,a=ou({},r.imports,u.imports),f=Ze(a),l=Kt(a),c=0,p=r.interpolate||I,s="__p += '",v=_e((r.escape||I).source+"|"+p.source+"|"+(p===R?C:I).source+"|"+(r.evaluate||I).source+"|$","g");n.replace(v,function(t,r,e,u,a,f){return e||(e=u),s+=n.slice(c,f).replace(A,i),r&&(s+="' +\n__e("+r+") +\n'"),a&&(o=!0,s+="';\n"+a+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),c=f+t.length,t}),s+="';\n";var g=r.variable,y=g;y||(g="obj",s="with ("+g+") {\n"+s+"\n}\n"),s=(o?s.replace(j,""):s).replace(k,"$1").replace(x,"$1;"),s="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var m="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+T++ +"]")+"\n*/";try{var d=ye(f,"return "+s+m).apply(h,l)}catch(b){throw b.source=s,b}return t?d(t):(d.source=s,d)}function oe(n,t,r){n=(n=+n)>-1?n:0;var e=-1,u=ve(n);for(t=Q(t,r,1);++e<n;)u[e]=t(e);return u}function ae(n){return null==n?"":we(n).replace(ru,pt)}function ie(n){var t=++m;return we(null==n?"":n)+t}function fe(n){return n=new g(n),n.__chain__=!0,n}function le(n,t){return t(n),n}function ce(){return this.__chain__=!0,this}function pe(){return we(this.__wrapped__)}function se(){return this.__wrapped__}n=n?nt.defaults(J.Object(),n,nt.pick(J,D)):J;var ve=n.Array,he=n.Boolean,ge=n.Date,ye=n.Function,me=n.Math,de=n.Number,be=n.Object,_e=n.RegExp,we=n.String,je=n.TypeError,ke=[],xe=be.prototype,Ce=n._,Oe=xe.toString,Ne=_e("^"+we(Oe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Re=me.ceil,Ee=n.clearTimeout,Ie=me.floor,Se=ye.prototype.toString,Ae=lt(Ae=be.getPrototypeOf)&&Ae,De=xe.hasOwnProperty,Te=ke.push,$e=n.setTimeout,Fe=ke.splice,Be=ke.unshift,We=function(){try{var n={},t=lt(t=be.defineProperty)&&t,r=t(n,n,n)&&t}catch(e){}return r}(),qe=lt(qe=be.create)&&qe,ze=lt(ze=ve.isArray)&&ze,Le=n.isFinite,Pe=n.isNaN,Ke=lt(Ke=be.keys)&&Ke,Ue=me.max,Me=me.min,Ve=n.parseInt,Ge=me.random,He={};He[F]=ve,He[B]=he,He[W]=ge,He[q]=ye,He[L]=be,He[z]=de,He[P]=_e,He[K]=we,g.prototype=e.prototype;var Je=e.support={};Je.funcDecomp=!lt(n.WinRTError)&&S.test(v),Je.funcNames="string"==typeof ye.name,e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:R,variable:"",imports:{_:e}},qe||(H=function(){function t(){}return function(r){if(It(r)){t.prototype=r;var e=new t;t.prototype=null}return e||n.Object()}}());var Qe=We?function(n,t){V.value=t,We(n,"__bindData__",V)}:ne,Xe=ze||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==F||!1},Ye=function(n){var t,r=n,e=[];if(!r)return e;if(!G[typeof n])return e;for(t in r)De.call(r,t)&&e.push(t);return e},Ze=Ke?function(n){return It(n)?Ke(n):[]}:Ye,nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tu=jt(nu),ru=_e("("+Ze(tu).join("|")+")","g"),eu=_e("["+Ze(nu).join("")+"]","g"),uu=function(n,t,r){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof r?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&G[typeof u])for(var c=-1,p=G[typeof u]&&Ze(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ou=function(n,t,r){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof r?2:a.length;++i<f;)if(u=a[i],u&&G[typeof u])for(var l=-1,c=G[typeof u]&&Ze(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},au=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!G[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(e in u)if(t(u[e],e,n)===!1)return o;return o},iu=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!G[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(var a=-1,i=G[typeof u]&&Ze(u),f=i?i.length:0;++a<f;)if(e=i[a],t(u[e],e,n)===!1)return o;return o},fu=Ae?function(n){if(!n||Oe.call(n)!=L)return!1;var t=n.valueOf,r=lt(t)&&(r=Ae(t))&&Ae(r);return r?n==r||Ae(n)==r:ct(n)}:ct,lu=ot(function(n,t,r){De.call(n,r)?n[r]++:n[r]=1}),cu=ot(function(n,t,r){(De.call(n,r)?n[r]:n[r]=[]).push(t)}),pu=ot(function(n,t,r){n[r]=t}),su=Zt,vu=Gt,hu=lt(hu=ge.now)&&hu||function(){return(new ge).getTime()},gu=8==Ve(w+"08")?Ve:function(n,t){return Ve($t(n)?n.replace(E,""):n,t||0)};return e.after=Dr,e.assign=uu,e.at=Ut,e.bind=Tr,e.bindAll=$r,e.bindKey=Fr,e.chain=fe,e.compact=pr,e.compose=Br,e.constant=Hr,e.countBy=lu,e.create=gt,e.createCallback=Jr,e.curry=Wr,e.debounce=qr,e.defaults=ou,e.defer=zr,e.delay=Lr,e.difference=sr,e.filter=Gt,e.flatten=yr,e.forEach=Qt,e.forEachRight=Xt,e.forIn=au,e.forInRight=dt,e.forOwn=iu,e.forOwnRight=bt,e.functions=_t,e.groupBy=cu,e.indexBy=pu,e.initial=dr,e.intersection=br,e.invert=jt,e.invoke=Yt,e.keys=Ze,e.map=Zt,e.mapValues=Bt,e.max=nr,e.memoize=Pr,e.merge=Wt,e.min=tr,e.omit=qt,e.once=Kr,e.pairs=zt,e.partial=Ur,e.partialRight=Mr,e.pick=Lt,e.pluck=su,e.property=te,e.pull=jr,e.range=kr,e.reject=ur,e.remove=xr,e.rest=Cr,e.shuffle=ar,e.sortBy=lr,e.tap=le,e.throttle=Vr,e.times=oe,e.toArray=cr,e.transform=Pt,e.union=Nr,e.uniq=Rr,e.values=Kt,e.where=vu,e.without=Er,e.wrap=Gr,e.xor=Ir,e.zip=Sr,e.zipObject=Ar,e.collect=Zt,e.drop=Cr,e.each=Qt,e.eachRight=Xt,e.extend=uu,e.methods=_t,e.object=Ar,e.select=Gt,e.tail=Cr,e.unique=Rr,e.unzip=Sr,Yr(e),e.clone=vt,e.cloneDeep=ht,e.contains=Mt,e.escape=Qr,e.every=Vt,e.find=Ht,e.findIndex=vr,e.findKey=yt,e.findLast=Jt,e.findLastIndex=hr,e.findLastKey=mt,e.has=wt,e.identity=Xr,e.indexOf=mr,e.isArguments=st,e.isArray=Xe,e.isBoolean=kt,e.isDate=xt,e.isElement=Ct,e.isEmpty=Ot,e.isEqual=Nt,e.isFinite=Rt,e.isFunction=Et,e.isNaN=St,e.isNull=At,e.isNumber=Dt,e.isObject=It,e.isPlainObject=fu,e.isRegExp=Tt,e.isString=$t,e.isUndefined=Ft,e.lastIndexOf=wr,e.mixin=Yr,e.noConflict=Zr,e.noop=ne,e.now=hu,e.parseInt=gu,e.random=re,e.reduce=rr,e.reduceRight=er,e.result=ee,e.runInContext=v,e.size=ir,e.some=fr,e.sortedIndex=Or,e.template=ue,e.unescape=ae,e.uniqueId=ie,e.all=Vt,e.any=fr,e.detect=Ht,e.findWhere=Ht,e.foldl=rr,e.foldr=er,e.include=Mt,e.inject=rr,Yr(function(){var n={};return iu(e,function(t,r){e.prototype[r]||(n[r]=t)}),n}(),!1),e.first=gr,e.last=_r,e.sample=or,e.take=gr,e.head=gr,iu(e,function(n,t){var r="sample"!==t;e.prototype[t]||(e.prototype[t]=function(t,e){var u=this.__chain__,o=n(this.__wrapped__,t,e);return u||null!=t&&(!e||r&&"function"==typeof t)?new g(o,u):o})}),e.VERSION="2.4.1",e.prototype.chain=ce,e.prototype.toString=pe,e.prototype.value=se,e.prototype.valueOf=se,Qt(["join","pop","shift"],function(n){var t=ke[n];e.prototype[n]=function(){var n=this.__chain__,r=t.apply(this.__wrapped__,arguments);return n?new g(r,n):r}}),Qt(["push","reverse","sort","unshift"],function(n){var t=ke[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Qt(["concat","slice","splice"],function(n){var t=ke[n];e.prototype[n]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),e}var h,g=[],y=[],m=0,d=+new Date+"",b=75,_=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,O=/\w*$/,N=/^\s*function[ \n\r\t]+\w/,R=/<%=([\s\S]+?)%>/g,E=RegExp("^["+w+"]*0+(?=.$)"),I=/($^)/,S=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,D=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],T=0,$="[object Arguments]",F="[object Array]",B="[object Boolean]",W="[object Date]",q="[object Function]",z="[object Number]",L="[object Object]",P="[object RegExp]",K="[object String]",U={};U[q]=!1,U[$]=U[F]=U[B]=U[W]=U[z]=U[L]=U[P]=U[K]=!0;var M={leading:!1,maxWait:0,trailing:!1},V={configurable:!1,enumerable:!1,value:null,writable:!1},G={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},H={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=G[typeof window]&&window||this,Q=G[typeof exports]&&exports&&!exports.nodeType&&exports,X=G[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===Q&&Q,Z=G[typeof n]&&n;!Z||Z.global!==Z&&Z.window!==Z||(J=Z);var nt=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(J._=nt,define(function(){return nt})):Q&&X?Y?(X.exports=nt)._=nt:Q._=nt:J._=nt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],38:[function(require,module,exports){
(function(e){var t=require("./libs/rsa.js"),r=require("crypto"),i=require("asn1").Ber,n=require("lodash"),a=require("./utils"),o="1.2.840.113549.1.1.1";module.exports=function(){function s(e,r){this.keyPair=new t.Key,this.$cache={},this.options=n.merge({signingAlgorithm:"sha256",environment:a.detectEnvironment()},r||{}),n.isObject(e)?this.generateKeyPair(e.b,e.e):n.isString(e)&&this.loadFromPEM(e)}return s.prototype.generateKeyPair=function(e,t){if(e=e||2048,t=t||65537,e%8!==0)throw Error("Key size must be a multiple of 8.");return this.keyPair.generate(e,t.toString(16)),this.$recalculateCache(),this},s.prototype.loadFromPEM=function(e){if(/^\s*-----BEGIN RSA PRIVATE KEY-----\s([A-Za-z0-9+/=]+\s)+-----END RSA PRIVATE KEY-----\s*$/g.test(e))this.$loadFromPrivatePEM(e,"base64");else{if(!/^\s*-----BEGIN PUBLIC KEY-----\s([A-Za-z0-9+/=]+\s)+-----END PUBLIC KEY-----\s*$/g.test(e))throw Error("Invalid PEM format");this.$loadFromPublicPEM(e,"base64")}this.$recalculateCache()},s.prototype.$loadFromPrivatePEM=function(t){var r=t.replace("-----BEGIN RSA PRIVATE KEY-----","").replace("-----END RSA PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,""),n=new i.Reader(new e(r,"base64"));n.readSequence(),n.readString(2,!0),this.keyPair.setPrivate(n.readString(2,!0),n.readString(2,!0),n.readString(2,!0),n.readString(2,!0),n.readString(2,!0),n.readString(2,!0),n.readString(2,!0),n.readString(2,!0))},s.prototype.$loadFromPublicPEM=function(t){var r=t.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,""),n=new i.Reader(new e(r,"base64"));n.readSequence();var a=new i.Reader(n.readString(48,!0));if(a.readOID(6,!0)!==o)throw Error("Invalid Public key PEM format");var s=new i.Reader(n.readString(3,!0));s.readByte(),s.readSequence(),this.keyPair.setPublic(s.readString(2,!0),s.readString(2,!0))},s.prototype.isPrivate=function(){return this.keyPair.n&&this.keyPair.e&&this.keyPair.d||!1},s.prototype.isPublic=function(e){return this.keyPair.n&&this.keyPair.e&&!(e&&this.keyPair.d)||!1},s.prototype.encrypt=function(e,t,r){var i=this.keyPair.encrypt(this.$getDataForEcrypt(e,r));return"buffer"!=t&&t?i.toString(t):i},s.prototype.decrypt=function(t,r){return t=n.isString(t)?new e(t,"base64"):t,this.$getDecryptedData(this.keyPair.decrypt(t),r)},s.prototype.sign=function(e,t,i){if(!this.isPrivate())throw Error("It is not private key");if("browser"==this.options.environment){var n=this.keyPair.sign(this.$getDataForEcrypt(e,i),this.options.signingAlgorithm.toLowerCase());return t&&"buffer"!=t?n.toString(t):n}t=t&&"buffer"!=t?t:null;var a=r.createSign("RSA-"+this.options.signingAlgorithm.toUpperCase());return a.update(this.$getDataForEcrypt(e,i)),a.sign(this.getPrivatePEM(),t)},s.prototype.verify=function(e,t,i,n){if(!this.isPublic())throw Error("It is not public key");if(n=n&&"buffer"!=n?n:null,"browser"==this.options.environment)return this.keyPair.verify(this.$getDataForEcrypt(e,i),t,n,this.options.signingAlgorithm.toLowerCase());var a=r.createVerify("RSA-"+this.options.signingAlgorithm.toUpperCase());return a.update(this.$getDataForEcrypt(e,i)),a.verify(this.getPublicPEM(),t,n)},s.prototype.getPrivatePEM=function(){if(!this.isPrivate())throw Error("It is not private key");return this.$cache.privatePEM},s.prototype.getPublicPEM=function(){if(!this.isPublic())throw Error("It is not public key");return this.$cache.publicPEM},s.prototype.getKeySize=function(){return this.keyPair.keySize},s.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},s.prototype.$getDataForEcrypt=function(t,r){if(n.isString(t)||n.isNumber(t))return new e(""+t,r||"utf8");if(e.isBuffer(t))return t;if(n.isObject(t))return new e(JSON.stringify(t));throw Error("Unexpected data type")},s.prototype.$getDecryptedData=function(e,t){return t=t||"buffer","buffer"==t?e:"json"==t?JSON.parse(e.toString()):e.toString(t)},s.prototype.$recalculateCache=function(){this.$cache.privatePEM=this.$makePrivatePEM(),this.$cache.publicPEM=this.$makePublicPEM()},s.prototype.$makePrivatePEM=function(){if(!this.isPrivate())return null;var e=this.keyPair.n.toBuffer(),t=this.keyPair.d.toBuffer(),r=this.keyPair.p.toBuffer(),n=this.keyPair.q.toBuffer(),o=this.keyPair.dmp1.toBuffer(),s=this.keyPair.dmq1.toBuffer(),u=this.keyPair.coeff.toBuffer(),f=e.length+t.length+r.length+n.length+o.length+s.length+u.length+512,c=new i.Writer({size:f});return c.startSequence(),c.writeInt(0),c.writeBuffer(e,2),c.writeInt(this.keyPair.e),c.writeBuffer(t,2),c.writeBuffer(r,2),c.writeBuffer(n,2),c.writeBuffer(o,2),c.writeBuffer(s,2),c.writeBuffer(u,2),c.endSequence(),"-----BEGIN RSA PRIVATE KEY-----\n"+a.linebrk(c.buffer.toString("base64"),64)+"\n-----END RSA PRIVATE KEY-----"},s.prototype.$makePublicPEM=function(){if(!this.isPublic())return null;var e=this.keyPair.n.toBuffer(),t=e.length+512,r=new i.Writer({size:t});r.writeByte(0),r.startSequence(),r.writeBuffer(e,2),r.writeInt(this.keyPair.e),r.endSequence();var n=r.buffer,s=new i.Writer({size:t});return s.startSequence(),s.startSequence(),s.writeOID(o),s.writeNull(),s.endSequence(),s.writeBuffer(n,3),s.endSequence(),"-----BEGIN PUBLIC KEY-----\n"+a.linebrk(s.buffer.toString("base64"),64)+"\n-----END PUBLIC KEY-----"},s}()}).call(this,require("buffer").Buffer);
},{"./libs/rsa.js":40,"./utils":41,"asn1":36,"buffer":11,"crypto":17,"lodash":37}],39:[function(require,module,exports){
(function(t){function i(i,r){null!=i&&("number"==typeof i?this.fromNumber(i,r):t.isBuffer(i)?this.fromBuffer(i):null==r&&"string"!=typeof i?this.fromByteArray(i):this.fromString(i,r))}function r(){return new i(null)}function o(t,i,r,o,s,h){for(var e=16383&i,n=i>>14;--h>=0;){var u=16383&this[t],f=this[t++]>>14,p=n*u+f*e;u=e*u+((16383&p)<<14)+r[o]+s,s=(u>>28)+(p>>14)+n*f,r[o++]=268435455&u}return s}function s(t){return hr.charAt(t)}function h(t,i){var r=er[t.charCodeAt(i)];return null==r?-1:r}function e(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s}function n(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function u(t){var i=r();return i.fromInt(t),i}function f(t,r,o){var s;switch(r){case 2:s=1;break;case 4:s=2;break;case 8:s=3;break;case 16:s=4;break;case 32:s=5;break;case 256:s=8;break;default:return void this.fromRadix(t,r)}this.t=0,this.s=0;for(var e=t.length,n=!1,u=0;--e>=0;){var f=8==s?255&t[e]:h(t,e);0>f?"-"==t.charAt(e)&&(n=!0):(n=!1,0===u?this[this.t++]=f:u+s>this.DB?(this[this.t-1]|=(f&(1<<this.DB-u)-1)<<u,this[this.t++]=f>>this.DB-u):this[this.t-1]|=f<<u,u+=s,u>=this.DB&&(u-=this.DB))}o||8!=s||0==(128&t[0])||(this.s=-1,u>0&&(this[this.t-1]|=(1<<this.DB-u)-1<<u)),this.clamp(),n&&i.ZERO.subTo(this,this)}function p(t,i){this.fromString(t,256,i)}function a(t){this.fromString(t,256,!0)}function c(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function m(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r,o=(1<<i)-1,h=!1,e="",n=this.t,u=this.DB-n*this.DB%i;if(n-->0)for(u<this.DB&&(r=this[n]>>u)>0&&(h=!0,e=s(r));n>=0;)i>u?(r=(this[n]&(1<<u)-1)<<i-u,r|=this[--n]>>(u+=this.DB-i)):(r=this[n]>>(u-=i)&o,0>=u&&(u+=this.DB,--n)),r>0&&(h=!0),h&&(e+=s(r));return h?e:"0"}function l(){var t=r();return i.ZERO.subTo(this,t),t}function T(){return this.s<0?this.negate():this}function v(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(i=r-t.t,0!=i)return this.s<0?-i:i;for(;--r>=0;)if(0!=(i=this[r]-t[r]))return i;return 0}function y(t){var i,r=1;return 0!=(i=t>>>16)&&(t=i,r+=16),0!=(i=t>>8)&&(t=i,r+=8),0!=(i=t>>4)&&(t=i,r+=4),0!=(i=t>>2)&&(t=i,r+=2),0!=(i=t>>1)&&(t=i,r+=1),r}function d(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)}function D(t,i){var r;for(r=this.t-1;r>=0;--r)i[r+t]=this[r];for(r=t-1;r>=0;--r)i[r]=0;i.t=this.t+t,i.s=this.s}function b(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s}function B(t,i){var r,o=t%this.DB,s=this.DB-o,h=(1<<s)-1,e=Math.floor(t/this.DB),n=this.s<<o&this.DM;for(r=this.t-1;r>=0;--r)i[r+e+1]=this[r]>>s|n,n=(this[r]&h)<<o;for(r=e-1;r>=0;--r)i[r]=0;i[e]=n,i.t=this.t+e+1,i.s=this.s,i.clamp()}function g(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(i.t=0);var o=t%this.DB,s=this.DB-o,h=(1<<o)-1;i[0]=this[r]>>o;for(var e=r+1;e<this.t;++e)i[e-r-1]|=(this[e]&h)<<s,i[e-r]=this[e]>>o;o>0&&(i[this.t-r-1]|=(this.s&h)<<s),i.t=this.t-r,i.clamp()}function S(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]-t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o-=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o-=t[r],i[r++]=o&this.DM,o>>=this.DB;o-=t.s}i.s=0>o?-1:0,-1>o?i[r++]=this.DV+o:o>0&&(i[r++]=o),i.t=r,i.clamp()}function M(t,r){var o=this.abs(),s=t.abs(),h=o.t;for(r.t=h+s.t;--h>=0;)r[h]=0;for(h=0;h<s.t;++h)r[h+o.t]=o.am(0,s[h],r,h,0,o.t);r.s=0,r.clamp(),this.s!=t.s&&i.ZERO.subTo(r,r)}function w(t){for(var i=this.abs(),r=t.t=2*i.t;--r>=0;)t[r]=0;for(r=0;r<i.t-1;++r){var o=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,o,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()}function E(t,o,s){var h=t.abs();if(!(h.t<=0)){var e=this.abs();if(e.t<h.t)return null!=o&&o.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=r());var n=r(),u=this.s,f=t.s,p=this.DB-y(h[h.t-1]);p>0?(h.lShiftTo(p,n),e.lShiftTo(p,s)):(h.copyTo(n),e.copyTo(s));var a=n.t,c=n[a-1];if(0!==c){var m=c*(1<<this.F1)+(a>1?n[a-2]>>this.F2:0),l=this.FV/m,T=(1<<this.F1)/m,v=1<<this.F2,d=s.t,D=d-a,b=null==o?r():o;for(n.dlShiftTo(D,b),s.compareTo(b)>=0&&(s[s.t++]=1,s.subTo(b,s)),i.ONE.dlShiftTo(a,b),b.subTo(n,n);n.t<a;)n[n.t++]=0;for(;--D>=0;){var B=s[--d]==c?this.DM:Math.floor(s[d]*l+(s[d-1]+v)*T);if((s[d]+=n.am(0,B,s,D,0,a))<B)for(n.dlShiftTo(D,b),s.subTo(b,s);s[d]<--B;)s.subTo(b,s)}null!=o&&(s.drShiftTo(a,o),u!=f&&i.ZERO.subTo(o,o)),s.t=a,s.clamp(),p>0&&s.rShiftTo(p,s),0>u&&i.ZERO.subTo(s,s)}}}function R(t){var o=r();return this.abs().divRemTo(t,null,o),this.s<0&&o.compareTo(i.ZERO)>0&&t.subTo(o,o),o}function O(t){this.m=t}function q(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function A(t){return t}function V(t){t.divRemTo(this.m,null,t)}function L(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function N(t,i){t.squareTo(i),this.reduce(i)}function x(){if(this.t<1)return 0;var t=this[0];if(0===(1&t))return 0;var i=3&t;return i=i*(2-(15&t)*i)&15,i=i*(2-(255&t)*i)&255,i=i*(2-((65535&t)*i&65535))&65535,i=i*(2-t*i%this.DV)%this.DV,i>0?this.DV-i:-i}function I(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Z(t){var o=r();return t.abs().dlShiftTo(this.m.t,o),o.divRemTo(this.m,null,o),t.s<0&&o.compareTo(i.ZERO)>0&&this.m.subTo(o,o),o}function k(t){var i=r();return t.copyTo(i),this.reduce(i),i}function F(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],o=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=i+this.m.t,t[r]+=this.m.am(0,o,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function P(t,i){t.squareTo(i),this.reduce(i)}function C(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function z(){return 0===(this.t>0?1&this[0]:this.s)}function U(t,o){if(t>4294967295||1>t)return i.ONE;var s=r(),h=r(),e=o.convert(this),n=y(t)-1;for(e.copyTo(s);--n>=0;)if(o.sqrTo(s,h),(t&1<<n)>0)o.mulTo(h,e,s);else{var u=s;s=h,h=u}return o.revert(s)}function j(t,i){var r;return r=256>t||i.isEven()?new O(i):new I(i),this.exp(t,r)}function G(){var t=r();return this.copyTo(t),t}function H(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function J(){return 0==this.t?this.s:this[0]<<24>>24}function K(){return 0==this.t?this.s:this[0]<<16>>16}function Q(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function X(t){if(null==t&&(t=10),0===this.signum()||2>t||t>36)return"0";var i=this.chunkSize(t),o=Math.pow(t,i),s=u(o),h=r(),e=r(),n="";for(this.divRemTo(s,h,e);h.signum()>0;)n=(o+e.intValue()).toString(t).substr(1)+n,h.divRemTo(s,h,e);return e.intValue().toString(t)+n}function Y(t,r){this.fromInt(0),null==r&&(r=10);for(var o=this.chunkSize(r),s=Math.pow(r,o),e=!1,n=0,u=0,f=0;f<t.length;++f){var p=h(t,f);0>p?"-"==t.charAt(f)&&0===this.signum()&&(e=!0):(u=r*u+p,++n>=o&&(this.dMultiply(s),this.dAddOffset(u,0),n=0,u=0))}n>0&&(this.dMultiply(Math.pow(r,n)),this.dAddOffset(u,0)),e&&i.ZERO.subTo(this,this)}function $(t,r){if("number"==typeof r)if(2>t)this.fromInt(1);else for(this.fromNumber(t),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),ni,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var o=ir.randomBytes((t>>3)+1),s=7&t;s>0?o[0]&=(1<<s)-1:o[0]=0,this.fromByteArray(o)}}function _(){var t=this.t,i=new Array;i[0]=this.s;var r,o=this.DB-t*this.DB%8,s=0;if(t-->0)for(o<this.DB&&(r=this[t]>>o)!=(this.s&this.DM)>>o&&(i[s++]=r|this.s<<this.DB-o);t>=0;)8>o?(r=(this[t]&(1<<o)-1)<<8-o,r|=this[--t]>>(o+=this.DB-8)):(r=this[t]>>(o-=8)&255,0>=o&&(o+=this.DB,--t)),0!=(128&r)&&(r|=-256),0===s&&(128&this.s)!=(128&r)&&++s,(s>0||r!=this.s)&&(i[s++]=r);return i}function ti(i){var r=new t(this.toByteArray());return i&&0===r[0]?r.slice(1):r}function ii(t){return 0==this.compareTo(t)}function ri(t){return this.compareTo(t)<0?this:t}function oi(t){return this.compareTo(t)>0?this:t}function si(t,i,r){var o,s,h=Math.min(t.t,this.t);for(o=0;h>o;++o)r[o]=i(this[o],t[o]);if(t.t<this.t){for(s=t.s&this.DM,o=h;o<this.t;++o)r[o]=i(this[o],s);r.t=this.t}else{for(s=this.s&this.DM,o=h;o<t.t;++o)r[o]=i(s,t[o]);r.t=t.t}r.s=i(this.s,t.s),r.clamp()}function hi(t,i){return t&i}function ei(t){var i=r();return this.bitwiseTo(t,hi,i),i}function ni(t,i){return t|i}function ui(t){var i=r();return this.bitwiseTo(t,ni,i),i}function fi(t,i){return t^i}function pi(t){var i=r();return this.bitwiseTo(t,fi,i),i}function ai(t,i){return t&~i}function ci(t){var i=r();return this.bitwiseTo(t,ai,i),i}function mi(){for(var t=r(),i=0;i<this.t;++i)t[i]=this.DM&~this[i];return t.t=this.t,t.s=~this.s,t}function li(t){var i=r();return 0>t?this.rShiftTo(-t,i):this.lShiftTo(t,i),i}function Ti(t){var i=r();return 0>t?this.lShiftTo(-t,i):this.rShiftTo(t,i),i}function vi(t){if(0===t)return-1;var i=0;return 0===(65535&t)&&(t>>=16,i+=16),0===(255&t)&&(t>>=8,i+=8),0===(15&t)&&(t>>=4,i+=4),0===(3&t)&&(t>>=2,i+=2),0===(1&t)&&++i,i}function yi(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+vi(this[t]);return this.s<0?this.t*this.DB:-1}function di(t){for(var i=0;0!=t;)t&=t-1,++i;return i}function Di(){for(var t=0,i=this.s&this.DM,r=0;r<this.t;++r)t+=di(this[r]^i);return t}function bi(t){var i=Math.floor(t/this.DB);return i>=this.t?0!=this.s:0!=(this[i]&1<<t%this.DB)}function Bi(t,r){var o=i.ONE.shiftLeft(t);return this.bitwiseTo(o,r,o),o}function gi(t){return this.changeBit(t,ni)}function Si(t){return this.changeBit(t,ai)}function Mi(t){return this.changeBit(t,fi)}function wi(t,i){for(var r=0,o=0,s=Math.min(t.t,this.t);s>r;)o+=this[r]+t[r],i[r++]=o&this.DM,o>>=this.DB;if(t.t<this.t){for(o+=t.s;r<this.t;)o+=this[r],i[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<t.t;)o+=t[r],i[r++]=o&this.DM,o>>=this.DB;o+=t.s}i.s=0>o?-1:0,o>0?i[r++]=o:-1>o&&(i[r++]=this.DV+o),i.t=r,i.clamp()}function Ei(t){var i=r();return this.addTo(t,i),i}function Ri(t){var i=r();return this.subTo(t,i),i}function Oi(t){var i=r();return this.multiplyTo(t,i),i}function qi(){var t=r();return this.squareTo(t),t}function Ai(t){var i=r();return this.divRemTo(t,i,null),i}function Vi(t){var i=r();return this.divRemTo(t,null,i),i}function Li(t){var i=r(),o=r();return this.divRemTo(t,i,o),new Array(i,o)}function Ni(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function xi(t,i){if(0!==t){for(;this.t<=i;)this[this.t++]=0;for(this[i]+=t;this[i]>=this.DV;)this[i]-=this.DV,++i>=this.t&&(this[this.t++]=0),++this[i]}}function Ii(){}function Zi(t){return t}function ki(t,i,r){t.multiplyTo(i,r)}function Fi(t,i){t.squareTo(i)}function Pi(t){return this.exp(t,new Ii)}function Ci(t,i,r){var o=Math.min(this.t+t.t,i);for(r.s=0,r.t=o;o>0;)r[--o]=0;var s;for(s=r.t-this.t;s>o;++o)r[o+this.t]=this.am(0,t[o],r,o,0,this.t);for(s=Math.min(t.t,i);s>o;++o)this.am(0,t[o],r,o,0,i-o);r.clamp()}function zi(t,i,r){--i;var o=r.t=this.t+t.t-i;for(r.s=0;--o>=0;)r[o]=0;for(o=Math.max(i-this.t,0);o<t.t;++o)r[this.t+o-i]=this.am(i-o,t[o],r,0,0,this.t+o-i);r.clamp(),r.drShiftTo(1,r)}function Ui(t){this.r2=r(),this.q3=r(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function ji(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var i=r();return t.copyTo(i),this.reduce(i),i}function Gi(t){return t}function Hi(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ji(t,i){t.squareTo(i),this.reduce(i)}function Ki(t,i,r){t.multiplyTo(i,r),this.reduce(r)}function Qi(t,i){var o,s,h=t.bitLength(),e=u(1);if(0>=h)return e;o=18>h?1:48>h?3:144>h?4:768>h?5:6,s=8>h?new O(i):i.isEven()?new Ui(i):new I(i);var n=new Array,f=3,p=o-1,a=(1<<o)-1;if(n[1]=s.convert(this),o>1){var c=r();for(s.sqrTo(n[1],c);a>=f;)n[f]=r(),s.mulTo(c,n[f-2],n[f]),f+=2}var m,l,T=t.t-1,v=!0,d=r();for(h=y(t[T])-1;T>=0;){for(h>=p?m=t[T]>>h-p&a:(m=(t[T]&(1<<h+1)-1)<<p-h,T>0&&(m|=t[T-1]>>this.DB+h-p)),f=o;0===(1&m);)m>>=1,--f;if((h-=f)<0&&(h+=this.DB,--T),v)n[m].copyTo(e),v=!1;else{for(;f>1;)s.sqrTo(e,d),s.sqrTo(d,e),f-=2;f>0?s.sqrTo(e,d):(l=e,e=d,d=l),s.mulTo(d,n[m],e)}for(;T>=0&&0===(t[T]&1<<h);)s.sqrTo(e,d),l=e,e=d,d=l,--h<0&&(h=this.DB-1,--T)}return s.revert(e)}function Wi(t){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var o=i;i=r,r=o}var s=i.getLowestSetBit(),h=r.getLowestSetBit();if(0>h)return i;for(h>s&&(h=s),h>0&&(i.rShiftTo(h,i),r.rShiftTo(h,r));i.signum()>0;)(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r));return h>0&&r.lShiftTo(h,r),r}function Xi(t){if(0>=t)return 0;var i=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0===i)r=this[0]%t;else for(var o=this.t-1;o>=0;--o)r=(i*r+this[o])%t;return r}function Yi(t){var r=t.isEven();if(this.isEven()&&r||0===t.signum())return i.ZERO;for(var o=t.clone(),s=this.clone(),h=u(1),e=u(0),n=u(0),f=u(1);0!=o.signum();){for(;o.isEven();)o.rShiftTo(1,o),r?(h.isEven()&&e.isEven()||(h.addTo(this,h),e.subTo(t,e)),h.rShiftTo(1,h)):e.isEven()||e.subTo(t,e),e.rShiftTo(1,e);for(;s.isEven();)s.rShiftTo(1,s),r?(n.isEven()&&f.isEven()||(n.addTo(this,n),f.subTo(t,f)),n.rShiftTo(1,n)):f.isEven()||f.subTo(t,f),f.rShiftTo(1,f);o.compareTo(s)>=0?(o.subTo(s,o),r&&h.subTo(n,h),e.subTo(f,e)):(s.subTo(o,s),r&&n.subTo(h,n),f.subTo(e,f))}return 0!=s.compareTo(i.ONE)?i.ZERO:f.compareTo(t)>=0?f.subtract(t):f.signum()<0?(f.addTo(t,f),f.signum()<0?f.add(t):f):f}function $i(t){var i,r=this.abs();if(1==r.t&&r[0]<=nr[nr.length-1]){for(i=0;i<nr.length;++i)if(r[0]==nr[i])return!0;return!1}if(r.isEven())return!1;for(i=1;i<nr.length;){for(var o=nr[i],s=i+1;s<nr.length&&ur>o;)o*=nr[s++];for(o=r.modInt(o);s>i;)if(o%nr[i++]===0)return!1}return r.millerRabin(t)}function _i(t){var o=this.subtract(i.ONE),s=o.getLowestSetBit();if(0>=s)return!1;var h=o.shiftRight(s);t=t+1>>1,t>nr.length&&(t=nr.length);for(var e=r(),n=0;t>n;++n){e.fromInt(nr[Math.floor(Math.random()*nr.length)]);var u=e.modPow(h,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(o)){for(var f=1;f++<s&&0!=u.compareTo(o);)if(u=u.modPowInt(2,this),0===u.compareTo(i.ONE))return!1;if(0!=u.compareTo(o))return!1}}return!0}var tr,ir=require("crypto");i.prototype.am=o,tr=28,i.prototype.DB=tr,i.prototype.DM=(1<<tr)-1,i.prototype.DV=1<<tr;var rr=52;i.prototype.FV=Math.pow(2,rr),i.prototype.F1=rr-tr,i.prototype.F2=2*tr-rr;var or,sr,hr="0123456789abcdefghijklmnopqrstuvwxyz",er=new Array;for(or="0".charCodeAt(0),sr=0;9>=sr;++sr)er[or++]=sr;for(or="a".charCodeAt(0),sr=10;36>sr;++sr)er[or++]=sr;for(or="A".charCodeAt(0),sr=10;36>sr;++sr)er[or++]=sr;O.prototype.convert=q,O.prototype.revert=A,O.prototype.reduce=V,O.prototype.mulTo=L,O.prototype.sqrTo=N,I.prototype.convert=Z,I.prototype.revert=k,I.prototype.reduce=F,I.prototype.mulTo=C,I.prototype.sqrTo=P,Ii.prototype.convert=Zi,Ii.prototype.revert=Zi,Ii.prototype.mulTo=ki,Ii.prototype.sqrTo=Fi,Ui.prototype.convert=ji,Ui.prototype.revert=Gi,Ui.prototype.reduce=Hi,Ui.prototype.mulTo=Ki,Ui.prototype.sqrTo=Ji;var nr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ur=(1<<26)/nr[nr.length-1];i.prototype.copyTo=e,i.prototype.fromInt=n,i.prototype.fromString=f,i.prototype.fromByteArray=p,i.prototype.fromBuffer=a,i.prototype.clamp=c,i.prototype.dlShiftTo=D,i.prototype.drShiftTo=b,i.prototype.lShiftTo=B,i.prototype.rShiftTo=g,i.prototype.subTo=S,i.prototype.multiplyTo=M,i.prototype.squareTo=w,i.prototype.divRemTo=E,i.prototype.invDigit=x,i.prototype.isEven=z,i.prototype.exp=U,i.prototype.chunkSize=Q,i.prototype.toRadix=X,i.prototype.fromRadix=Y,i.prototype.fromNumber=$,i.prototype.bitwiseTo=si,i.prototype.changeBit=Bi,i.prototype.addTo=wi,i.prototype.dMultiply=Ni,i.prototype.dAddOffset=xi,i.prototype.multiplyLowerTo=Ci,i.prototype.multiplyUpperTo=zi,i.prototype.modInt=Xi,i.prototype.millerRabin=_i,i.prototype.toString=m,i.prototype.negate=l,i.prototype.abs=T,i.prototype.compareTo=v,i.prototype.bitLength=d,i.prototype.mod=R,i.prototype.modPowInt=j,i.prototype.clone=G,i.prototype.intValue=H,i.prototype.byteValue=J,i.prototype.shortValue=K,i.prototype.signum=W,i.prototype.toByteArray=_,i.prototype.toBuffer=ti,i.prototype.equals=ii,i.prototype.min=ri,i.prototype.max=oi,i.prototype.and=ei,i.prototype.or=ui,i.prototype.xor=pi,i.prototype.andNot=ci,i.prototype.not=mi,i.prototype.shiftLeft=li,i.prototype.shiftRight=Ti,i.prototype.getLowestSetBit=yi,i.prototype.bitCount=Di,i.prototype.testBit=bi,i.prototype.setBit=gi,i.prototype.clearBit=Si,i.prototype.flipBit=Mi,i.prototype.add=Ei,i.prototype.subtract=Ri,i.prototype.multiply=Oi,i.prototype.divide=Ai,i.prototype.remainder=Vi,i.prototype.divideAndRemainder=Li,i.prototype.modPow=Qi,i.prototype.modInverse=Yi,i.prototype.pow=Pi,i.prototype.gcd=Wi,i.prototype.isProbablePrime=$i,i.int2char=s,i.ZERO=u(0),i.ONE=u(1),i.prototype.square=qi,module.exports=i}).call(this,require("buffer").Buffer);
},{"buffer":11,"crypto":17}],40:[function(require,module,exports){
(function(t){var e=require("crypto"),r=require("./jsbn.js"),n=require("../utils.js"),h=(require("lodash"),{sha1:new t("3021300906052b0e03021a05000414","hex"),sha256:new t("3031300d060960864801650304020105000420","hex"),md5:new t("3020300c06082a864886f70d020505000410","hex")});exports.BigInteger=r,module.exports.Key=function(){function i(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return i.prototype.generate=function(t,e){var n=t>>1;this.e=parseInt(e,16);for(var h=new r(e,16);;){for(;this.p=new r(t-n,1),0!==this.p.subtract(r.ONE).gcd(h).compareTo(r.ONE)||!this.p.isProbablePrime(10););for(;this.q=new r(n,1),0!==this.q.subtract(r.ONE).gcd(h).compareTo(r.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var i=this.p;this.p=this.q,this.q=i}var s=this.p.subtract(r.ONE),o=this.q.subtract(r.ONE),a=s.multiply(o);if(0===a.gcd(h).compareTo(r.ONE)){this.n=this.p.multiply(this.q),this.d=h.modInverse(a),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(o),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},i.prototype.setPrivate=function(t,e,h,i,s,o,a,c){if(!(t&&e&&h&&t.length>0&&e.length>0&&h.length>0))throw Error("Invalid RSA private key");this.n=new r(t),this.e=n.get32IntFromBuffer(e,0),this.d=new r(h),i&&s&&o&&a&&c&&(this.p=new r(i),this.q=new r(s),this.dmp1=new r(o),this.dmq1=new r(a),this.coeff=new r(c)),this.$$recalculateCache()},i.prototype.setPublic=function(t,e){if(!(t&&e&&t.length>0&&e.length>0))throw Error("Invalid RSA public key");this.n=new r(t),this.e=n.get32IntFromBuffer(e,0),this.$$recalculateCache()},i.prototype.$doPrivate=function(t){if(this.p||this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},i.prototype.$doPublic=function(t){return t.modPowInt(this.e,this.n)},i.prototype.encrypt=function(e){var r=[],n=[],h=e.length,i=Math.ceil(h/this.maxMessageLength)||1,s=Math.ceil(h/i||1);if(1==i)r.push(e);else for(var o=0;i>o;o++)r.push(e.slice(o*s,(o+1)*s));for(var a in r){var c=r[a],p=this.$$pkcs1pad2(c);if(null===p)return null;var l=this.$doPublic(p);if(null===l)return null;for(var u=l.toBuffer(!0);u.length<this.encryptedDataLength;)u=t.concat([new t([0]),u]);n.push(u)}return t.concat(n)},i.prototype.decrypt=function(e){if(e.length%this.encryptedDataLength>0)throw Error("Incorrect data or key");for(var n=[],h=0,i=0,s=e.length/this.encryptedDataLength,o=0;s>o;o++){h=o*this.encryptedDataLength,i=h+this.encryptedDataLength;var a=new r(e.slice(h,Math.min(i,e.length))),c=this.$doPrivate(a);if(null===c)return null;n.push(this.$$pkcs1unpad2(c))}return t.concat(n)},i.prototype.sign=function(n,h){var i=e.createHash(h);i.update(n);for(var s=this.$$pkcs1(i.digest(),h),o=this.$doPrivate(new r(s)).toBuffer(!0);o.length<this.encryptedDataLength;)o=t.concat([new t([0]),o]);return o},i.prototype.verify=function(n,h,i,s){i&&(h=new t(h,i));var o=e.createHash(s);o.update(n);var a=this.$$pkcs1(o.digest(),s),c=this.$doPublic(new r(h));return c.toBuffer().toString("hex")==a.toString("hex")},Object.defineProperty(i.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(i.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(i.prototype,"maxMessageLength",{get:function(){return this.encryptedDataLength-11}}),i.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyBitLength%2==1&&(this.cache.keyBitLength=this.cache.keyBitLength+1),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},i.prototype.$$pkcs1=function(e,r){if(!h[r])throw Error("Unsupported hash algorithm");var n=t.concat([h[r],e]);if(n.length+10>this.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+r+")");var i=new t(this.encryptedDataLength-n.length-1);i.fill(255,0,i.length-1),i[0]=1,i[i.length-1]=0;var s=t.concat([i,n]);return s},i.prototype.$$pkcs1pad2=function(t){if(t.length>this.maxMessageLength)throw new Error("Message too long for RSA (n="+this.encryptedDataLength+", l="+t.length+")");var n=Array.prototype.slice.call(t,0);n.unshift(0);for(var h=e.randomBytes(this.encryptedDataLength-n.length-2),i=0;i<h.length;i++){for(var s=h[i];0===s;)s=e.randomBytes(1)[0];n.unshift(s)}return n.unshift(2),n.unshift(0),new r(n)},i.prototype.$$pkcs1unpad2=function(e){for(var r=e.toByteArray(),n=0;n<r.length&&0===r[n];)++n;if(r.length-n!=this.encryptedDataLength-1||2!=r[n])return null;for(++n;0!==r[n];)if(++n>=r.length)return null;for(var h=0,i=new t(r.length-n-1);++n<r.length;)i[h++]=255&r[n];return i},i}()}).call(this,require("buffer").Buffer);
},{"../utils.js":41,"./jsbn.js":39,"buffer":11,"crypto":17,"lodash":37}],41:[function(require,module,exports){
(function(r){module.exports.linebrk=function(r,e){for(var n="",t=0;t+e<r.length;)n+=r.substring(t,t+e)+"\n",t+=e;return n+r.substring(t,r.length)},module.exports.detectEnvironment=function(){return r&&"browser"!=r.title?"node":window?"browser":"node"},module.exports.get32IntFromBuffer=function(r,e){e=e||0;var n=0;if((n=r.length-e)>0){if(n>=4)return r.readUInt32BE(e);for(var t=0,o=e+n,u=0;o>e;o--,u+=2)t+=r[o-1]*Math.pow(16,u);return t}return 0/0}}).call(this,require("_process"));
},{"_process":28}],42:[function(require,module,exports){
(function(r){(function(){function e(r,e,n){var t=e&&n||0,u=0;for(e=e||[],r.toLowerCase().replace(/[0-9a-f]{2}/g,function(r){16>u&&(e[t+u++]=d[r])});16>u;)e[t+u++]=0;return e}function n(r,e){var n=e||0,t=v;return t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]}function t(r,e,t){var u=e&&t||0,o=e||[];r=r||{};var a=null!=r.clockseq?r.clockseq:g,f=null!=r.msecs?r.msecs:(new Date).getTime(),i=null!=r.nsecs?r.nsecs:w+1,c=f-h+(i-w)/1e4;if(0>c&&null==r.clockseq&&(a=a+1&16383),(0>c||f>h)&&null==r.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=f,w=i,g=a,f+=122192928e5;var s=(1e4*(268435455&f)+i)%4294967296;o[u++]=s>>>24&255,o[u++]=s>>>16&255,o[u++]=s>>>8&255,o[u++]=255&s;var l=f/4294967296*1e4&268435455;o[u++]=l>>>8&255,o[u++]=255&l,o[u++]=l>>>24&15|16,o[u++]=l>>>16&255,o[u++]=a>>>8|128,o[u++]=255&a;for(var v=r.node||m,d=0;6>d;d++)o[u+d]=v[d];return e?e:n(o)}function u(r,e,t){var u=e&&t||0;"string"==typeof r&&(e="binary"==r?new l(16):null,r=null),r=r||{};var a=r.random||(r.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var f=0;16>f;f++)e[u+f]=a[f];return e||n(a)}var o,a=this;if("function"==typeof require)try{var f=require("crypto").randomBytes;o=f&&function(){return f(16)}}catch(i){}if(!o&&a.crypto&&crypto.getRandomValues){var c=new Uint8Array(16);o=function(){return crypto.getRandomValues(c),c}}if(!o){var s=new Array(16);o=function(){for(var r,e=0;16>e;e++)0===(3&e)&&(r=4294967296*Math.random()),s[e]=r>>>((3&e)<<3)&255;return s}}for(var l="function"==typeof r?r:Array,v=[],d={},y=0;256>y;y++)v[y]=(y+256).toString(16).substr(1),d[v[y]]=y;var p=o(),m=[1|p[0],p[1],p[2],p[3],p[4],p[5]],g=16383&(p[6]<<8|p[7]),h=0,w=0,q=u;if(q.v1=t,q.v4=u,q.parse=e,q.unparse=n,q.BufferClass=l,"function"==typeof define&&define.amd)define(function(){return q});else if("undefined"!=typeof module&&module.exports)module.exports=q;else{var C=a.uuid;q.noConflict=function(){return a.uuid=C,q},a.uuid=q}}).call(this)}).call(this,require("buffer").Buffer);
},{"buffer":11,"crypto":17}]},{},[1])(1)
});


//# sourceMappingURL=kaskade.map